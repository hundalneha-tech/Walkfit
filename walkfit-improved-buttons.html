<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#028090">
    <title>WalkFit - Your Walking Companion</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        /* Loading screen styles */
        #loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, #028090 0%, #00A896 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
        }
        
        #loading-screen.hidden {
            display: none;
        }
        
        .loading-logo {
            width: 100px;
            height: 100px;
            background: white;
            border-radius: 25px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 50px;
            margin-bottom: 20px;
            animation: pulse 1.5s ease-in-out infinite;
        }
        
        .loading-text {
            color: white;
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 10px;
        }
        
        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(255,255,255,0.3);
            border-top-color: white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
    </style>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #028090;
            --primary-dark: #015f6b;
            --secondary: #00A896;
            --accent: #f5576c;
            --purple: #667eea;
            --yellow: #fdcb6e;
            --bg-light: #f8f9fa;
            --bg-white: #ffffff;
            --text-dark: #1a1a1a;
            --text-gray: #666666;
            --text-light: #999999;
            --border: #e0e0e0;
            --shadow-sm: 0 2px 8px rgba(0,0,0,0.08);
            --shadow-md: 0 4px 16px rgba(0,0,0,0.12);
            --shadow-lg: 0 8px 32px rgba(0,0,0,0.16);
            --radius-sm: 12px;
            --radius-md: 16px;
            --radius-lg: 24px;
        }

        body {
            font-family: 'Outfit', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #028090 0%, #00A896 100%);
            min-height: 100vh;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
        }

        #root {
            width: 100%;
            height: 100vh;
            position: relative;
        }

        .phone-container {
            width: 100%;
            height: 100%;
            background: white;
            position: relative;
            overflow: hidden;
        }

        .phone-container::before {
            display: none; /* Hide notch on mobile */
        }

        .screen {
            width: 100%;
            height: 100%;
            background: var(--bg-light);
            overflow: hidden;
            position: relative;
            display: flex;
            flex-direction: column;
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(40px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes scaleIn {
            from { opacity: 0; transform: scale(0.8); }
            to { opacity: 1; transform: scale(1); }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes shimmer {
            0% { background-position: -1000px 0; }
            100% { background-position: 1000px 0; }
        }

        .fade-in {
            animation: fadeIn 0.5s ease-out forwards;
        }

        .slide-up {
            animation: slideUp 0.6s ease-out forwards;
        }

        .scale-in {
            animation: scaleIn 0.4s ease-out forwards;
        }

        /* Splash Screen */
        .splash-screen {
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #028090 0%, #00A896 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .splash-screen::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 1px, transparent 1px);
            background-size: 50px 50px;
            animation: float 20s linear infinite;
        }

        @keyframes float {
            0% { transform: translate(0, 0); }
            100% { transform: translate(50px, 50px); }
        }

        .splash-logo {
            width: 140px;
            height: 140px;
            background: white;
            border-radius: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 70px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.2);
            animation: pulse 2s ease-in-out infinite;
            z-index: 1;
        }

        .splash-text {
            color: white;
            font-size: 42px;
            font-weight: 800;
            margin-top: 30px;
            letter-spacing: -1px;
            z-index: 1;
        }

        .splash-tagline {
            color: rgba(255,255,255,0.9);
            font-size: 16px;
            font-weight: 300;
            margin-top: 10px;
            z-index: 1;
        }

        /* Onboarding */
        .onboarding-container {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            background: white;
            overflow: hidden;
        }

        .onboarding-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 40px 30px;
            text-align: center;
        }

        .onboarding-image {
            width: 240px;
            height: 240px;
            background: linear-gradient(135deg, #e0f2f1 0%, #b2dfdb 100%);
            border-radius: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 100px;
            margin-bottom: 40px;
            box-shadow: var(--shadow-md);
        }

        .onboarding-content h2 {
            font-size: 28px;
            font-weight: 700;
            color: var(--text-dark);
            margin-bottom: 16px;
            line-height: 1.2;
        }

        .onboarding-content p {
            font-size: 16px;
            color: var(--text-gray);
            line-height: 1.6;
            max-width: 320px;
        }

        .onboarding-dots {
            display: flex;
            gap: 10px;
            margin: 40px 0;
        }

        .onboarding-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #e0e0e0;
            transition: all 0.3s ease;
        }

        .onboarding-dot.active {
            background: var(--primary);
            width: 32px;
            border-radius: 5px;
        }

        .onboarding-actions {
            padding: 20px 30px 30px;
        }

        /* Buttons */
        .btn {
            width: 100%;
            padding: 16px 24px;
            border: none;
            border-radius: var(--radius-md);
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Outfit', sans-serif;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
            box-shadow: 0 4px 16px rgba(2, 128, 144, 0.3);
        }

        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 6px 24px rgba(2, 128, 144, 0.4);
        }

        .btn-secondary {
            background: transparent;
            color: var(--primary);
            border: 2px solid var(--primary);
            margin-top: 12px;
        }

        .btn-secondary:hover {
            background: rgba(2, 128, 144, 0.05);
        }

        /* Main App Layout */
        .app-header {
            background: white;
            padding: 16px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--border);
        }

        .app-header h1 {
            font-size: 24px;
            font-weight: 700;
            color: var(--text-dark);
        }

        .header-icons {
            display: flex;
            gap: 12px;
        }

        .icon-btn {
            width: 40px;
            height: 40px;
            border: none;
            background: var(--bg-light);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .icon-btn:hover {
            background: var(--border);
            transform: scale(1.05);
        }

        .app-content {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            padding-bottom: 90px;
        }

        .app-content::-webkit-scrollbar {
            width: 0;
        }

        /* Bottom Navigation */
        .bottom-nav {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            border-top: 1px solid var(--border);
            display: flex;
            justify-content: space-around;
            padding: 12px 8px 20px;
            border-radius: 0 0 28px 28px;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            cursor: pointer;
            padding: 8px 12px;
            border-radius: 12px;
            transition: all 0.3s ease;
            flex: 1;
        }

        .nav-item:hover {
            background: var(--bg-light);
        }

        .nav-item.active {
            color: var(--primary);
        }

        .nav-icon {
            font-size: 24px;
            transition: transform 0.3s ease;
        }

        .nav-item.active .nav-icon {
            transform: scale(1.2);
        }

        .nav-label {
            font-size: 11px;
            font-weight: 600;
        }

        /* Cards */
        .card {
            background: white;
            border-radius: var(--radius-md);
            padding: 20px;
            margin-bottom: 16px;
            box-shadow: var(--shadow-sm);
            transition: all 0.3s ease;
        }

        .card:hover {
            box-shadow: var(--shadow-md);
            transform: translateY(-2px);
        }

        .stats-card {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            padding: 24px;
            border-radius: var(--radius-lg);
            margin-bottom: 20px;
            box-shadow: var(--shadow-md);
        }

        .big-stat {
            font-size: 56px;
            font-weight: 800;
            line-height: 1;
            margin: 12px 0;
            font-family: 'Space Mono', monospace;
        }

        .stat-label {
            font-size: 14px;
            opacity: 0.9;
            font-weight: 500;
        }

        /* Progress Bar */
        .progress-bar {
            width: 100%;
            height: 12px;
            background: rgba(255,255,255,0.3);
            border-radius: 6px;
            overflow: hidden;
            margin: 12px 0;
        }

        .progress-fill {
            height: 100%;
            background: white;
            border-radius: 6px;
            transition: width 1s ease-out;
            box-shadow: 0 0 12px rgba(255,255,255,0.5);
        }

        /* Section Header */
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 24px 0 16px;
        }

        .section-header h3 {
            font-size: 18px;
            font-weight: 700;
            color: var(--text-dark);
        }

        .section-link {
            font-size: 14px;
            color: var(--primary);
            font-weight: 600;
            cursor: pointer;
            text-decoration: none;
        }

        .section-link:hover {
            text-decoration: underline;
        }

        /* Quick Stats Grid */
        .quick-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-bottom: 20px;
        }

        .quick-stat {
            background: white;
            padding: 16px;
            border-radius: var(--radius-md);
            text-align: center;
            box-shadow: var(--shadow-sm);
        }

        .quick-stat-icon {
            font-size: 32px;
            margin-bottom: 8px;
        }

        .quick-stat-value {
            font-size: 24px;
            font-weight: 700;
            color: var(--text-dark);
            margin-bottom: 4px;
        }

        .quick-stat-label {
            font-size: 13px;
            color: var(--text-gray);
            font-weight: 500;
        }

        /* Challenge Cards */
        .challenge-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: var(--radius-md);
            margin-bottom: 12px;
            position: relative;
            overflow: hidden;
        }

        .challenge-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100px;
            height: 100px;
            background: rgba(255,255,255,0.1);
            border-radius: 50%;
            transform: translate(30%, -30%);
        }

        .challenge-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 12px;
        }

        .challenge-title {
            font-size: 16px;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .challenge-subtitle {
            font-size: 13px;
            opacity: 0.9;
        }

        .challenge-badge {
            background: rgba(255,255,255,0.2);
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            backdrop-filter: blur(10px);
        }

        /* Event Cards */
        .event-card {
            background: white;
            border-radius: var(--radius-md);
            overflow: hidden;
            margin-bottom: 16px;
            box-shadow: var(--shadow-sm);
            border: 2px solid transparent;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .event-card:hover {
            border-color: var(--primary);
            box-shadow: var(--shadow-md);
        }

        .event-image {
            height: 140px;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 60px;
        }

        .event-content {
            padding: 16px;
        }

        .event-date {
            display: inline-block;
            background: var(--bg-light);
            color: var(--primary);
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .event-title {
            font-size: 16px;
            font-weight: 700;
            color: var(--text-dark);
            margin-bottom: 8px;
        }

        .event-meta {
            display: flex;
            gap: 16px;
            font-size: 13px;
            color: var(--text-gray);
        }

        .event-meta span {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        /* Program Cards */
        .program-card {
            background: white;
            border-radius: var(--radius-md);
            padding: 20px;
            margin-bottom: 16px;
            box-shadow: var(--shadow-sm);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .program-card:hover {
            box-shadow: var(--shadow-md);
            transform: translateX(4px);
        }

        .program-header {
            display: flex;
            gap: 16px;
            margin-bottom: 16px;
        }

        .program-icon {
            width: 60px;
            height: 60px;
            border-radius: var(--radius-sm);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            flex-shrink: 0;
        }

        .program-info h4 {
            font-size: 16px;
            font-weight: 700;
            color: var(--text-dark);
            margin-bottom: 4px;
        }

        .program-info p {
            font-size: 13px;
            color: var(--text-gray);
        }

        .program-progress {
            margin-top: 12px;
        }

        .program-progress-bar {
            width: 100%;
            height: 8px;
            background: var(--bg-light);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 8px;
        }

        .program-progress-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 1s ease-out;
        }

        .program-progress-text {
            font-size: 12px;
            color: var(--text-gray);
            display: flex;
            justify-content: space-between;
        }

        /* Leaderboard */
        .leaderboard-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 16px;
            background: white;
            border-radius: var(--radius-md);
            margin-bottom: 12px;
            box-shadow: var(--shadow-sm);
            transition: all 0.3s ease;
        }

        .leaderboard-item:hover {
            box-shadow: var(--shadow-md);
            transform: scale(1.02);
        }

        .leaderboard-rank {
            width: 32px;
            height: 32px;
            background: var(--bg-light);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 14px;
            color: var(--text-dark);
        }

        .leaderboard-rank.top {
            background: linear-gradient(135deg, #fdcb6e, #ffeaa7);
        }

        .leaderboard-avatar {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 18px;
        }

        .leaderboard-info {
            flex: 1;
        }

        .leaderboard-name {
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 2px;
        }

        .leaderboard-steps {
            font-size: 13px;
            color: var(--text-gray);
        }

        .leaderboard-score {
            font-weight: 700;
            color: var(--primary);
            font-size: 18px;
        }

        /* Achievement Grid */
        .achievement-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-bottom: 20px;
        }

        .achievement-item {
            background: white;
            padding: 16px 12px;
            border-radius: var(--radius-md);
            text-align: center;
            box-shadow: var(--shadow-sm);
            transition: all 0.3s ease;
        }

        .achievement-item:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-md);
        }

        .achievement-item.locked {
            background: #f5f5f5;
            border: 2px dashed #ccc;
        }

        .achievement-icon {
            font-size: 40px;
            margin-bottom: 8px;
        }

        .achievement-item.locked .achievement-icon {
            opacity: 0.3;
        }

        .achievement-name {
            font-size: 12px;
            font-weight: 600;
            color: var(--text-dark);
        }

        .achievement-item.locked .achievement-name {
            color: var(--text-light);
        }

        /* Settings List */
        .settings-list {
            background: white;
            border-radius: var(--radius-md);
            overflow: hidden;
            box-shadow: var(--shadow-sm);
        }

        .settings-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 18px 20px;
            border-bottom: 1px solid var(--border);
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .settings-item:last-child {
            border-bottom: none;
        }

        .settings-item:hover {
            background: var(--bg-light);
        }

        .settings-label {
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 600;
            color: var(--text-dark);
        }

        .settings-arrow {
            color: var(--text-light);
            font-size: 20px;
        }

        /* Reward Point Card */
        .reward-card {
            background: linear-gradient(135deg, #f093fb, #f5576c);
            color: white;
            padding: 28px;
            border-radius: var(--radius-lg);
            text-align: center;
            margin-bottom: 24px;
            box-shadow: var(--shadow-md);
        }

        .reward-label {
            font-size: 15px;
            opacity: 0.95;
            margin-bottom: 8px;
        }

        .reward-points {
            font-size: 56px;
            font-weight: 800;
            line-height: 1;
            margin-bottom: 8px;
            font-family: 'Space Mono', monospace;
        }

        .reward-value {
            font-size: 14px;
            opacity: 0.9;
            margin-bottom: 20px;
        }

        /* Coupon Card */
        .coupon-card {
            background: linear-gradient(135deg, #ffeaa7, #fdcb6e);
            padding: 20px;
            border-radius: var(--radius-md);
            margin-bottom: 12px;
            box-shadow: var(--shadow-sm);
        }

        .coupon-title {
            font-size: 16px;
            font-weight: 700;
            color: var(--text-dark);
            margin-bottom: 6px;
        }

        .coupon-desc {
            font-size: 13px;
            color: #333;
            margin-bottom: 8px;
        }

        .coupon-expiry {
            font-size: 12px;
            color: var(--text-gray);
        }

        /* Tab Navigation */
        .tab-nav {
            display: flex;
            gap: 8px;
            background: white;
            padding: 8px;
            border-radius: var(--radius-md);
            margin-bottom: 20px;
            box-shadow: var(--shadow-sm);
        }

        .tab-btn {
            flex: 1;
            padding: 12px;
            border: none;
            background: transparent;
            border-radius: 10px;
            font-weight: 600;
            font-size: 14px;
            color: var(--text-gray);
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Outfit', sans-serif;
        }

        .tab-btn.active {
            background: var(--primary);
            color: white;
            box-shadow: 0 2px 8px rgba(2, 128, 144, 0.3);
        }

        /* Loading Spinner */
        .spinner {
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-top: 3px solid white;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Chart Container */
        .chart-container {
            background: white;
            padding: 20px;
            border-radius: var(--radius-md);
            margin-bottom: 20px;
            box-shadow: var(--shadow-sm);
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .chart-title {
            font-size: 16px;
            font-weight: 700;
            color: var(--text-dark);
        }

        /* Profile Header */
        .profile-header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            padding: 32px 20px;
            text-align: center;
            color: white;
        }

        .profile-avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: white;
            color: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            font-weight: 700;
            margin: 0 auto 16px;
            box-shadow: 0 8px 24px rgba(0,0,0,0.2);
        }

        .profile-name {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .profile-email {
            font-size: 14px;
            opacity: 0.9;
        }

        .profile-stats {
            display: flex;
            gap: 12px;
            margin-top: 24px;
            justify-content: center;
        }

        .profile-stat-item {
            background: rgba(255,255,255,0.2);
            backdrop-filter: blur(10px);
            padding: 12px 20px;
            border-radius: var(--radius-sm);
            text-align: center;
        }

        .profile-stat-value {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .profile-stat-label {
            font-size: 12px;
            opacity: 0.9;
        }

        /* Store Styles */
        .store-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 24px 20px;
            color: white;
            margin-bottom: 20px;
        }

        .store-header h2 {
            font-size: 28px;
            font-weight: 800;
            margin-bottom: 8px;
        }

        .store-header p {
            font-size: 14px;
            opacity: 0.9;
        }

        .category-chips {
            display: flex;
            gap: 8px;
            overflow-x: auto;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }

        .category-chips::-webkit-scrollbar {
            height: 0;
        }

        .category-chip {
            padding: 8px 16px;
            background: white;
            border: 2px solid var(--border);
            border-radius: 20px;
            font-size: 13px;
            font-weight: 600;
            color: var(--text-gray);
            cursor: pointer;
            white-space: nowrap;
            transition: all 0.3s ease;
        }

        .category-chip.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .category-chip:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-sm);
        }

        .product-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
            margin-bottom: 20px;
        }

        .product-card {
            background: white;
            border-radius: var(--radius-md);
            overflow: hidden;
            box-shadow: var(--shadow-sm);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .product-card:hover {
            box-shadow: var(--shadow-md);
            transform: translateY(-4px);
        }

        .product-image {
            width: 100%;
            height: 160px;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 60px;
            position: relative;
        }

        .product-badge {
            position: absolute;
            top: 8px;
            right: 8px;
            background: rgba(255,255,255,0.95);
            color: var(--accent);
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 700;
        }

        .product-info {
            padding: 12px;
        }

        .product-name {
            font-size: 14px;
            font-weight: 700;
            color: var(--text-dark);
            margin-bottom: 4px;
            line-height: 1.3;
        }

        .product-description {
            font-size: 12px;
            color: var(--text-gray);
            margin-bottom: 8px;
            line-height: 1.4;
        }

        .product-rating {
            display: flex;
            align-items: center;
            gap: 4px;
            margin-bottom: 8px;
        }

        .product-stars {
            color: #fdcb6e;
            font-size: 12px;
        }

        .product-rating-count {
            font-size: 11px;
            color: var(--text-light);
        }

        .product-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 8px;
        }

        .product-price {
            font-size: 18px;
            font-weight: 800;
            color: var(--primary);
        }

        .product-old-price {
            font-size: 13px;
            color: var(--text-light);
            text-decoration: line-through;
            margin-left: 4px;
        }

        .add-to-cart-btn {
            width: 36px;
            height: 36px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .add-to-cart-btn:hover {
            background: var(--primary-dark);
            transform: scale(1.1);
        }

        .cart-badge {
            position: absolute;
            top: -6px;
            right: -6px;
            background: var(--accent);
            color: white;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            font-size: 11px;
            font-weight: 700;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid white;
        }

        .search-bar {
            position: relative;
            margin-bottom: 20px;
        }

        .search-input {
            width: 100%;
            padding: 14px 45px 14px 20px;
            border: 2px solid var(--border);
            border-radius: var(--radius-md);
            font-size: 14px;
            font-family: 'Outfit', sans-serif;
            transition: all 0.3s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--primary);
        }

        .search-icon {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 18px;
            color: var(--text-gray);
        }

        .featured-banner {
            background: linear-gradient(135deg, #ffeaa7 0%, #fdcb6e 100%);
            padding: 20px;
            border-radius: var(--radius-md);
            margin-bottom: 20px;
            box-shadow: var(--shadow-sm);
        }

        .featured-banner h3 {
            font-size: 18px;
            font-weight: 700;
            color: var(--text-dark);
            margin-bottom: 8px;
        }

        .featured-banner p {
            font-size: 13px;
            color: #666;
            margin-bottom: 12px;
        }

        .featured-banner .btn {
            padding: 10px 20px;
            background: var(--text-dark);
            color: white;
            border-radius: 10px;
            font-size: 13px;
        }

        /* Auth Screen Styles */
        .auth-screen {
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #028090 0%, #00A896 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            padding: 30px 20px;
            overflow-y: auto;
        }

        .auth-logo {
            width: 100px;
            height: 100px;
            background: white;
            border-radius: 25px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 50px;
            margin-bottom: 20px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.2);
        }

        .auth-title {
            color: white;
            font-size: 32px;
            font-weight: 800;
            margin-bottom: 8px;
            text-align: center;
        }

        .auth-subtitle {
            color: rgba(255,255,255,0.9);
            font-size: 14px;
            margin-bottom: 30px;
            text-align: center;
            max-width: 280px;
        }

        .auth-container {
            width: 100%;
            max-width: 360px;
        }

        .auth-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 20px;
            background: rgba(255,255,255,0.15);
            padding: 4px;
            border-radius: 12px;
            backdrop-filter: blur(10px);
        }

        .auth-tab {
            flex: 1;
            padding: 10px;
            background: transparent;
            border: none;
            border-radius: 10px;
            color: rgba(255,255,255,0.7);
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Outfit', sans-serif;
        }

        .auth-tab.active {
            background: white;
            color: var(--primary);
        }

        .auth-form {
            background: white;
            padding: 24px;
            border-radius: 16px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            margin-bottom: 16px;
        }

        .form-group {
            margin-bottom: 16px;
        }

        .form-label {
            display: block;
            font-size: 13px;
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 6px;
        }

        .form-input {
            width: 100%;
            padding: 12px 14px;
            border: 2px solid var(--border);
            border-radius: 10px;
            font-size: 14px;
            font-family: 'Outfit', sans-serif;
            transition: all 0.3s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(2, 128, 144, 0.1);
        }

        .phone-input-group {
            display: flex;
            gap: 8px;
        }

        .country-select {
            width: 95px;
            padding: 12px 10px;
            border: 2px solid var(--border);
            border-radius: 10px;
            font-size: 14px;
            cursor: pointer;
            font-family: 'Outfit', sans-serif;
        }

        .country-select:focus {
            outline: none;
            border-color: var(--primary);
        }

        .phone-input {
            flex: 1;
        }

        .error-message {
            background: #fee;
            border: 1px solid #fcc;
            color: #c00;
            padding: 10px 12px;
            border-radius: 8px;
            font-size: 12px;
            margin-bottom: 12px;
        }

        .success-message {
            background: #efe;
            border: 1px solid #cfc;
            color: #060;
            padding: 10px 12px;
            border-radius: 8px;
            font-size: 12px;
            margin-bottom: 12px;
        }

        .checkbox-group {
            display: flex;
            align-items: flex-start;
            gap: 8px;
            margin-bottom: 16px;
        }

        .checkbox-group input {
            margin-top: 2px;
            width: 16px;
            height: 16px;
            cursor: pointer;
        }

        .checkbox-group label {
            font-size: 12px;
            color: #666;
            line-height: 1.4;
            cursor: pointer;
        }

        .checkbox-group label a {
            color: var(--primary);
            text-decoration: none;
        }

        .privacy-text {
            font-size: 11px;
            color: rgba(255,255,255,0.8);
            text-align: center;
            line-height: 1.4;
            margin-top: 16px;
        }

        /* Enhanced Submit Button */
        .submit-btn {
            width: 100%;
            padding: 16px 24px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            border: none;
            border-radius: 14px;
            font-size: 16px;
            font-weight: 700;
            color: white;
            cursor: pointer;
            font-family: 'Outfit', sans-serif;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 16px rgba(2, 128, 144, 0.3);
            position: relative;
            overflow: hidden;
            letter-spacing: 0.3px;
        }

        /* Shimmer Effect */
        .submit-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                90deg,
                transparent,
                rgba(255, 255, 255, 0.3),
                transparent
            );
            transition: left 0.6s ease;
        }

        .submit-btn:hover:not(:disabled)::before {
            left: 100%;
        }

        /* Hover State */
        .submit-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(2, 128, 144, 0.4);
            background: linear-gradient(135deg, var(--primary-dark) 0%, var(--primary) 100%);
        }

        /* Active State */
        .submit-btn:active:not(:disabled) {
            transform: translateY(0);
            box-shadow: 0 2px 8px rgba(2, 128, 144, 0.2);
        }

        /* Disabled State */
        .submit-btn:disabled {
            background: linear-gradient(135deg, #cccccc 0%, #999999 100%);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
            opacity: 0.7;
        }

        .submit-btn:disabled::before {
            display: none;
        }

        /* Loading Spinner */
        @keyframes button-spinner {
            0% { transform: translateY(-50%) rotate(0deg); }
            100% { transform: translateY(-50%) rotate(360deg); }
        }

        .submit-btn.loading::after {
            content: '';
            position: absolute;
            width: 18px;
            height: 18px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-top-color: white;
            border-radius: 50%;
            right: 24px;
            top: 50%;
            transform: translateY(-50%);
            animation: button-spinner 0.8s linear infinite;
        }

        /* Pulse Animation */
        @keyframes button-pulse {
            0%, 100% {
                box-shadow: 0 4px 16px rgba(2, 128, 144, 0.3);
            }
            50% {
                box-shadow: 0 4px 16px rgba(2, 128, 144, 0.5);
            }
        }

        .submit-btn:not(:disabled):not(:hover) {
            animation: button-pulse 2s ease-in-out infinite;
        }

        .google-btn {
            width: 100%;
            background: white;
            color: #333;
            padding: 12px 20px;
            border: 2px solid var(--border);
            border-radius: 10px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.3s ease;
            font-family: 'Outfit', sans-serif;
        }

        .google-btn:hover {
            border-color: var(--primary);
            background: rgba(2, 128, 144, 0.05);
        }

        /* Responsive */
        @media (max-width: 480px) {
            .phone-container {
                border-radius: 0;
            }
            
            .screen {
                border-radius: 0;
            }
        }

        /* Desktop View - Show as phone mockup */
        @media (min-width: 768px) {
            body {
                display: flex;
                align-items: center;
                justify-content: center;
                padding: 20px;
            }

            #root {
                max-width: 420px;
                max-height: 900px;
                box-shadow: 0 20px 60px rgba(0,0,0,0.3);
                border-radius: 40px;
            }

            .phone-container {
                border-radius: 40px;
                padding: 20px 16px;
            }

            .phone-container::before {
                content: '';
                display: block;
                position: absolute;
                top: 12px;
                left: 50%;
                transform: translateX(-50%);
                width: 80px;
                height: 6px;
                background: #333;
                border-radius: 3px;
                z-index: 1000;
            }

            .screen {
                border-radius: 28px;
            }

            .bottom-nav {
                border-radius: 0 0 28px 28px;
            }
        }

        /* Action Buttons */
        .action-buttons-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 20px;
        }

        .action-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px 16px;
            background: linear-gradient(135deg, #028090, #00A896);
            border: none;
            border-radius: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 16px rgba(2, 128, 144, 0.3);
            color: white;
        }

        .action-btn:active {
            transform: scale(0.95);
        }

        .action-btn.secondary {
            background: white;
            color: var(--primary);
            border: 2px solid var(--primary);
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }

        .action-btn-icon {
            font-size: 36px;
            margin-bottom: 8px;
        }

        .action-btn-text {
            font-size: 14px;
            font-weight: 600;
        }

        .quick-actions {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .quick-btn {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 6px;
            padding: 14px 10px;
            background: white;
            border: 2px solid var(--border);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .quick-btn:active {
            transform: scale(0.95);
        }

        .quick-btn-icon {
            font-size: 24px;
        }

        .quick-btn-label {
            font-size: 11px;
            font-weight: 600;
            color: var(--text-dark);
        }

        /* Modal Overlay & Content */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            animation: fadeIn 0.3s ease;
        }

        .modal-content {
            background: white;
            border-radius: 24px;
            padding: 24px;
            max-width: 90%;
            width: 400px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            animation: slideUp 0.3s ease;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 16px;
            border-bottom: 2px solid var(--bg-light);
        }

        .modal-title {
            font-size: 22px;
            font-weight: 700;
            color: var(--text-dark);
        }

        .modal-close {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: var(--bg-light);
            border: none;
            font-size: 24px;
            color: var(--text-gray);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .modal-close:hover {
            background: var(--border);
            color: var(--text-dark);
        }

        /* Form Styles */
        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            font-size: 14px;
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 8px;
        }

        .form-input, .form-select, .form-textarea {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid var(--border);
            border-radius: 12px;
            font-size: 16px;
            font-family: 'Outfit', sans-serif;
            transition: border-color 0.3s ease;
            background: white;
        }

        .form-input:focus, .form-select:focus, .form-textarea:focus {
            outline: none;
            border-color: var(--primary);
        }

        .form-textarea {
            min-height: 100px;
            resize: vertical;
        }

        /* Tracking Modal Specific */
        .tracking-status {
            text-align: center;
            padding: 20px;
        }

        .tracking-icon {
            font-size: 72px;
            margin-bottom: 16px;
            animation: pulse 2s ease-in-out infinite;
        }

        .tracking-time {
            font-size: 48px;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin: 16px 0;
        }

        .tracking-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
            margin: 24px 0;
            padding: 20px;
            background: var(--bg-light);
            border-radius: 16px;
        }

        .tracking-stat {
            text-align: center;
        }

        .tracking-stat-value {
            font-size: 24px;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 4px;
        }

        .tracking-stat-label {
            font-size: 12px;
            color: var(--text-gray);
            font-weight: 600;
        }

        .button-group {
            display: flex;
            gap: 12px;
            margin-top: 20px;
        }

        .btn-secondary {
            background: var(--bg-light);
            color: var(--text-dark);
        }

        .btn-secondary:hover {
            background: var(--border);
        }

        .btn-danger {
            background: var(--accent);
        }

        .btn-danger:hover {
            background: #e04456;
        }

        /* Success/Error Messages */
        .message {
            padding: 12px 16px;
            border-radius: 12px;
            margin-bottom: 16px;
            font-size: 14px;
            font-weight: 600;
        }

        .message-success {
            background: #d4edda;
            color: #155724;
            border: 2px solid #c3e6cb;
        }

        .message-error {
            background: #f8d7da;
            color: #721c24;
            border: 2px solid #f5c6cb;
        }

        /* Activity History Card */
        .activity-history-card {
            background: white;
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 12px;
            box-shadow: var(--shadow-sm);
            display: flex;
            gap: 16px;
            align-items: center;
            transition: all 0.3s ease;
        }

        .activity-history-card:hover {
            box-shadow: var(--shadow-md);
            transform: translateY(-2px);
        }

        .activity-history-icon {
            font-size: 36px;
            width: 56px;
            height: 56px;
            background: var(--bg-light);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .activity-history-details {
            flex: 1;
        }

        .activity-history-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 4px;
        }

        .activity-history-meta {
            font-size: 13px;
            color: var(--text-gray);
        }

        .activity-history-time {
            font-size: 12px;
            color: var(--text-light);
        }

        /* Program Enrollment Card */
        .enrolled-program {
            border: 2px solid var(--primary);
            position: relative;
        }

        .enrolled-badge {
            position: absolute;
            top: 12px;
            right: 12px;
            background: var(--primary);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 700;
        }

        /* Cart Badge */
        .cart-badge {
            position: absolute;
            top: -8px;
            right: -8px;
            background: var(--accent);
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: 700;
        }

        /* Wishlist Heart */
        .wishlist-btn {
            position: absolute;
            top: 12px;
            right: 12px;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: white;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .wishlist-btn:hover {
            transform: scale(1.1);
        }

        .wishlist-btn.active {
            color: red;
        }

        /* Loading Spinner */
        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid var(--bg-light);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
        }

        .empty-state-icon {
            font-size: 64px;
            margin-bottom: 16px;
            opacity: 0.5;
        }

        .empty-state-text {
            font-size: 18px;
            font-weight: 600;
            color: var(--text-gray);
            margin-bottom: 24px;
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen">
        <div class="loading-logo"></div>
        <div class="loading-text">WalkFit</div>
        <div class="loading-spinner"></div>
    </div>
    
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Global App Data Manager
        const AppDataManager = {
            // Initialize app data
            initAppData: () => {
                const defaultData = {
                    user: {
                        name: 'Rahul Kumar',
                        email: 'john.doe@email.com',
                        avatar: 'JD',
                        dailyGoal: 10000,
                        joinDate: new Date().toISOString()
                    },
                    todayStats: {
                        steps: 0,
                        calories: 0,
                        activeMinutes: 0,
                        heartPoints: 0,
                        distance: 0
                    },
                    activities: [],
                    programs: [],
                    purchases: [],
                    achievements: [],
                    friends: [],
                    rewards: {
                        points: 0,
                        coupons: []
                    }
                };

                const savedData = localStorage.getItem('walkfit_data');
                if (!savedData) {
                    localStorage.setItem('walkfit_data', JSON.stringify(defaultData));
                    return defaultData;
                }
                return JSON.parse(savedData);
            },

            // Save data
            saveData: (data) => {
                localStorage.setItem('walkfit_data', JSON.stringify(data));
            },

            // Get data
            getData: () => {
                const data = localStorage.getItem('walkfit_data');
                return data ? JSON.parse(data) : AppDataManager.initAppData();
            },

            // Update specific fields
            updateField: (field, value) => {
                const data = AppDataManager.getData();
                data[field] = value;
                AppDataManager.saveData(data);
                return data;
            },

            // Add activity
            addActivity: (activity) => {
                const data = AppDataManager.getData();
                activity.id = Date.now();
                activity.date = new Date().toISOString();
                data.activities.unshift(activity);
                
                // Update today's stats
                data.todayStats.steps += activity.steps || 0;
                data.todayStats.calories += activity.calories || 0;
                data.todayStats.activeMinutes += activity.duration || 0;
                data.todayStats.distance += activity.distance || 0;
                data.todayStats.heartPoints += Math.floor((activity.duration || 0) / 10);
                
                // Add reward points
                data.rewards.points += Math.floor((activity.steps || 0) / 100);
                
                AppDataManager.saveData(data);
                return data;
            },

            // Enroll in program
            enrollProgram: (program) => {
                const data = AppDataManager.getData();
                const enrolled = {
                    ...program,
                    enrollDate: new Date().toISOString(),
                    progress: 0,
                    completed: false
                };
                data.programs.push(enrolled);
                AppDataManager.saveData(data);
                return data;
            },

            // Make purchase
            makePurchase: (item) => {
                const data = AppDataManager.getData();
                const purchase = {
                    ...item,
                    purchaseDate: new Date().toISOString(),
                    id: Date.now()
                };
                data.purchases.push(purchase);
                AppDataManager.saveData(data);
                return data;
            },

            // Reset daily stats (call at midnight)
            resetDailyStats: () => {
                const data = AppDataManager.getData();
                data.todayStats = {
                    steps: 0,
                    calories: 0,
                    activeMinutes: 0,
                    heartPoints: 0,
                    distance: 0
                };
                AppDataManager.saveData(data);
                return data;
            }
        };

        // Simple Bar Chart Component (replaces Recharts)
        function SimpleBarChart({ data, dataKey }) {
            const maxValue = Math.max(...data.map(d => d[dataKey]));
            
            return (
                <div style={{display: 'flex', alignItems: 'flex-end', justifyContent: 'space-around', height: '200px', padding: '20px 10px'}}>
                    {data.map((item, index) => {
                        const height = (item[dataKey] / maxValue) * 160;
                        return (
                            <div key={index} style={{flex: 1, display: 'flex', flexDirection: 'column', alignItems: 'center', gap: '8px'}}>
                                <div style={{
                                    width: '100%',
                                    maxWidth: '40px',
                                    height: `${height}px`,
                                    background: 'linear-gradient(135deg, #028090, #00A896)',
                                    borderRadius: '8px 8px 0 0',
                                    transition: 'all 0.3s ease',
                                    position: 'relative'
                                }}>
                                    <div style={{
                                        position: 'absolute',
                                        top: '-25px',
                                        left: '50%',
                                        transform: 'translateX(-50%)',
                                        fontSize: '11px',
                                        fontWeight: '600',
                                        color: '#666'
                                    }}>
                                        {item[dataKey].toLocaleString()}
                                    </div>
                                </div>
                                <div style={{fontSize: '12px', color: '#999', fontWeight: '600'}}>
                                    {item.day || item.week}
                                </div>
                            </div>
                        );
                    })}
                </div>
            );
        }

        // Main App Component
        function WalkFitApp() {
            const [currentScreen, setCurrentScreen] = useState('splash');
            const [onboardingStep, setOnboardingStep] = useState(0);
            const [activeTab, setActiveTab] = useState('home');
            const [isAuthenticated, setIsAuthenticated] = useState(false);
            const [appData, setAppData] = useState(AppDataManager.initAppData());

            useEffect(() => {
                // Auto-advance from splash screen
                const timer = setTimeout(() => {
                    // Check if user is already logged in
                    const hasAccount = localStorage.getItem('walkfit_user_logged_in');
                    if (hasAccount === 'true') {
                        setIsAuthenticated(true);
                        setCurrentScreen('app');
                    } else {
                        setCurrentScreen('auth');
                    }
                }, 2500);
                return () => clearTimeout(timer);
            }, []);

            const handleLogin = (userData) => {
                setIsAuthenticated(true);
                localStorage.setItem('walkfit_user_logged_in', 'true');
                if (userData) {
                    const data = AppDataManager.getData();
                    data.user = { ...data.user, ...userData };
                    AppDataManager.saveData(data);
                    setAppData(data);
                }
                setCurrentScreen('onboarding');
            };

            const handleLogout = () => {
                setIsAuthenticated(false);
                localStorage.setItem('walkfit_user_logged_in', 'false');
                setCurrentScreen('auth');
            };

            const refreshAppData = () => {
                setAppData(AppDataManager.getData());
            };

            const renderScreen = () => {
                switch (currentScreen) {
                    case 'splash':
                        return <SplashScreen />;
                    case 'auth':
                        return <AuthScreen onLogin={handleLogin} />;
                    case 'onboarding':
                        return <OnboardingScreen 
                            step={onboardingStep}
                            setStep={setOnboardingStep}
                            onComplete={() => setCurrentScreen('app')}
                        />;
                    case 'app':
                        return <MainApp 
                            activeTab={activeTab} 
                            setActiveTab={setActiveTab}
                            appData={appData}
                            refreshAppData={refreshAppData}
                            onLogout={handleLogout}
                        />;
                    default:
                        return <SplashScreen />;
                }
            };

            return (
                <div className="phone-container">
                    <div className="screen">
                        {renderScreen()}
                    </div>
                </div>
            );
        }

        // Splash Screen
        function SplashScreen() {
            return (
                <div className="splash-screen">
                    <div className="splash-logo scale-in"></div>
                    <div className="splash-text fade-in">WalkFit</div>
                    <div className="splash-tagline fade-in">Your Walking Companion</div>
                </div>
            );
        }

        // Authentication Screen
        function AuthScreen({ onLogin }) {
            const [activeTab, setActiveTab] = useState('login');
            const [formData, setFormData] = useState({
                fullName: '',
                email: '',
                password: '',
                countryCode: '+1',
                phoneNumber: '',
                agreeTerms: false
            });
            const [error, setError] = useState('');
            const [success, setSuccess] = useState('');
            const [loading, setLoading] = useState(false);

            const countryCodes = [
                { code: '+1', country: 'US/CA', flag: '' },
                { code: '+44', country: 'UK', flag: '' },
                { code: '+91', country: 'IN', flag: '' },
                { code: '+86', country: 'CN', flag: '' },
                { code: '+81', country: 'JP', flag: '' },
                { code: '+49', country: 'DE', flag: '' },
                { code: '+33', country: 'FR', flag: '' },
                { code: '+61', country: 'AU', flag: '' },
                { code: '+55', country: 'BR', flag: '' },
                { code: '+52', country: 'MX', flag: '' },
                { code: '+82', country: 'KR', flag: '' },
                { code: '+34', country: 'ES', flag: '' },
                { code: '+39', country: 'IT', flag: '' },
                { code: '+7', country: 'RU', flag: '' },
                { code: '+27', country: 'ZA', flag: '' }
            ];

            const handleInputChange = (e) => {
                const { name, value, type, checked } = e.target;
                setFormData(prev => ({
                    ...prev,
                    [name]: type === 'checkbox' ? checked : value
                }));
                setError('');
            };

            const validateEmail = (email) => {
                return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
            };

            const validatePhone = (phone) => {
                return /^[0-9]{6,15}$/.test(phone.replace(/[\s-]/g, ''));
            };

            const handleGoogleLogin = () => {
                const apiUrl = window.API_CONFIG?.API_URL || 'http://localhost:5000/api';
                window.location.href = `${apiUrl}/auth/google`;
            };

            const handleSignup = async (e) => {
                e.preventDefault();
                setError('');
                setSuccess('');

                if (!formData.fullName.trim()) {
                    setError('Please enter your full name');
                    return;
                }

                if (!validateEmail(formData.email)) {
                    setError('Please enter a valid email address');
                    return;
                }

                if (formData.password.length < 6) {
                    setError('Password must be at least 6 characters');
                    return;
                }

                if (!validatePhone(formData.phoneNumber)) {
                    setError('Please enter a valid phone number (6-15 digits)');
                    return;
                }

                if (!formData.agreeTerms) {
                    setError('Please agree to the Terms and Privacy Policy');
                    return;
                }

                setLoading(true);

                // Mock signup for demo - replace with actual API call
                setTimeout(() => {
                    setSuccess('Account created! Please login to continue.');
                    setTimeout(() => {
                        setActiveTab('login');
                        setFormData(prev => ({ ...prev, password: '' }));
                    }, 1500);
                    setLoading(false);
                }, 1000);
            };

            const handleLogin = async (e) => {
                e.preventDefault();
                setError('');

                if (!validateEmail(formData.email)) {
                    setError('Please enter a valid email address');
                    return;
                }

                if (!formData.password) {
                    setError('Please enter your password');
                    return;
                }

                setLoading(true);

                // Mock login for demo - replace with actual API call
                setTimeout(() => {
                    // For demo, accept any credentials
                    onLogin();
                    setLoading(false);
                }, 1000);
            };

            return (
                <div className="auth-screen">
                    <div className="auth-logo scale-in"></div>
                    <h1 className="auth-title fade-in">WalkFit</h1>
                    <p className="auth-subtitle fade-in">Track your steps, join challenges, and stay active!</p>

                    <div className="auth-container">
                        <div className="auth-tabs">
                            <button
                                className={`auth-tab ${activeTab === 'login' ? 'active' : ''}`}
                                onClick={() => {
                                    setActiveTab('login');
                                    setError('');
                                    setSuccess('');
                                }}
                            >
                                Login
                            </button>
                            <button
                                className={`auth-tab ${activeTab === 'signup' ? 'active' : ''}`}
                                onClick={() => {
                                    setActiveTab('signup');
                                    setError('');
                                    setSuccess('');
                                }}
                            >
                                Sign Up
                            </button>
                        </div>

                        <div className="auth-form slide-up">
                            {error && <div className="error-message"> {error}</div>}
                            {success && <div className="success-message"> {success}</div>}

                            {activeTab === 'signup' ? (
                                <form onSubmit={handleSignup}>
                                    <div className="form-group">
                                        <label className="form-label">Full Name *</label>
                                        <input
                                            type="text"
                                            name="fullName"
                                            className="form-input"
                                            placeholder="Rahul Kumar"
                                            value={formData.fullName}
                                            onChange={handleInputChange}
                                            required
                                        />
                                    </div>

                                    <div className="form-group">
                                        <label className="form-label">Email Address *</label>
                                        <input
                                            type="email"
                                            name="email"
                                            className="form-input"
                                            placeholder="john@example.com"
                                            value={formData.email}
                                            onChange={handleInputChange}
                                            required
                                        />
                                    </div>

                                    <div className="form-group">
                                        <label className="form-label">Password *</label>
                                        <input
                                            type="password"
                                            name="password"
                                            className="form-input"
                                            placeholder="Minimum 6 characters"
                                            value={formData.password}
                                            onChange={handleInputChange}
                                            required
                                        />
                                    </div>

                                    <div className="form-group">
                                        <label className="form-label">Phone Number *</label>
                                        <div className="phone-input-group">
                                            <select
                                                name="countryCode"
                                                className="country-select"
                                                value={formData.countryCode}
                                                onChange={handleInputChange}
                                            >
                                                {countryCodes.map(({ code, flag }) => (
                                                    <option key={code} value={code}>
                                                        {flag} {code}
                                                    </option>
                                                ))}
                                            </select>
                                            <input
                                                type="tel"
                                                name="phoneNumber"
                                                className="form-input phone-input"
                                                placeholder="1234567890"
                                                value={formData.phoneNumber}
                                                onChange={handleInputChange}
                                                required
                                            />
                                        </div>
                                    </div>

                                    <div className="checkbox-group">
                                        <input
                                            type="checkbox"
                                            id="agreeTerms"
                                            name="agreeTerms"
                                            checked={formData.agreeTerms}
                                            onChange={handleInputChange}
                                        />
                                        <label htmlFor="agreeTerms">
                                            I agree to the <a href="#" onClick={(e) => e.preventDefault()}>Terms</a> and <a href="#" onClick={(e) => e.preventDefault()}>Privacy Policy</a>
                                        </label>
                                    </div>

                                    <button 
                                        type="submit" 
                                        className={`submit-btn ${loading ? 'loading' : ''}`}
                                        disabled={loading}
                                    >
                                        {loading ? 'Creating Account...' : ' Create Account'}
                                    </button>
                                </form>
                            ) : (
                                <form onSubmit={handleLogin}>
                                    <div className="form-group">
                                        <label className="form-label">Email Address</label>
                                        <input
                                            type="email"
                                            name="email"
                                            className="form-input"
                                            placeholder="john@example.com"
                                            value={formData.email}
                                            onChange={handleInputChange}
                                            required
                                        />
                                    </div>

                                    <div className="form-group">
                                        <label className="form-label">Password</label>
                                        <input
                                            type="password"
                                            name="password"
                                            className="form-input"
                                            placeholder="Enter your password"
                                            value={formData.password}
                                            onChange={handleInputChange}
                                            required
                                        />
                                    </div>

                                    <div style={{textAlign: 'right', marginBottom: '16px'}}>
                                        <a href="#" style={{fontSize: '12px', color: 'var(--primary)', textDecoration: 'none'}} onClick={(e) => e.preventDefault()}>
                                            Forgot Password?
                                        </a>
                                    </div>

                                    <button 
                                        type="submit" 
                                        className={`submit-btn ${loading ? 'loading' : ''}`}
                                        disabled={loading}
                                    >
                                        {loading ? 'Logging in...' : ' Login to WalkFit'}
                                    </button>
                                </form>
                            )}

                            <div className="divider">OR</div>

                            <button className="google-btn" onClick={handleGoogleLogin}>
                                <svg width="18" height="18" viewBox="0 0 20 20">
                                    <path fill="#4285F4" d="M19.6 10.2c0-.7-.1-1.4-.2-2H10v3.8h5.4c-.2 1.2-1 2.2-2.1 2.9v2.5h3.4c2-1.8 3.1-4.5 3.1-7.2z"/>
                                    <path fill="#34A853" d="M10 20c2.8 0 5.2-.9 6.9-2.5l-3.4-2.6c-.9.6-2.1 1-3.5 1-2.7 0-5-1.8-5.8-4.3H.8v2.7C2.5 17.8 6 20 10 20z"/>
                                    <path fill="#FBBC05" d="M4.2 11.6c-.2-.6-.3-1.3-.3-2s.1-1.4.3-2V4.9H.8C.3 6 0 7.5 0 10s.3 4 .8 5.1l3.4-2.7z"/>
                                    <path fill="#EA4335" d="M10 3.9c1.5 0 2.9.5 4 1.5l3-3C15.2.7 12.8 0 10 0 6 0 2.5 2.2.8 5.5l3.4 2.7C5 5.7 7.3 3.9 10 3.9z"/>
                                </svg>
                                Continue with Google
                            </button>
                        </div>

                        <p className="privacy-text">
                            By continuing, you agree to our Terms of Service and Privacy Policy
                        </p>
                    </div>
                </div>
            );
        }

        // Onboarding Screen
        function OnboardingScreen({ step, setStep, onComplete }) {
            const slides = [
                {
                    icon: '',
                    title: 'Set Your Goals',
                    description: 'Create personalized walking goals and track your daily progress with ease.'
                },
                {
                    icon: '',
                    title: 'Track Progress',
                    description: 'Monitor your steps, distance, and calories with detailed insights and analytics.'
                },
                {
                    icon: '',
                    title: 'Join Challenges',
                    description: 'Participate in community challenges, earn badges, and compete with friends!'
                }
            ];

            const currentSlide = slides[step];

            return (
                <div className="onboarding-container">
                    <div className="onboarding-content">
                        <div className="onboarding-image slide-up" style={{animationDelay: '0.1s'}}>
                            {currentSlide.icon}
                        </div>
                        <h2 className="fade-in" style={{animationDelay: '0.2s'}}>{currentSlide.title}</h2>
                        <p className="fade-in" style={{animationDelay: '0.3s'}}>{currentSlide.description}</p>
                        <div className="onboarding-dots">
                            {slides.map((_, idx) => (
                                <div key={idx} className={`onboarding-dot ${idx === step ? 'active' : ''}`} />
                            ))}
                        </div>
                    </div>
                    <div className="onboarding-actions">
                        {step < slides.length - 1 ? (
                            <>
                                <button className="btn btn-primary" onClick={() => setStep(step + 1)}>
                                    Next
                                </button>
                                <button className="btn btn-secondary" onClick={onComplete}>
                                    Skip
                                </button>
                            </>
                        ) : (
                            <button className="btn btn-primary" onClick={onComplete}>
                                Get Started
                            </button>
                        )}
                    </div>
                </div>
            );
        }

        // Main App
        function MainApp({ activeTab, setActiveTab, appData, refreshAppData, onLogout }) {
            const renderContent = () => {
                switch (activeTab) {
                    case 'home':
                        return <HomeScreen appData={appData} refreshAppData={refreshAppData} />;
                    case 'stats':
                        return <StatsScreen appData={appData} refreshAppData={refreshAppData} />;
                    case 'programs':
                        return <ProgramsScreen appData={appData} refreshAppData={refreshAppData} />;
                    case 'events':
                        return <EventsScreen appData={appData} refreshAppData={refreshAppData} />;
                    case 'store':
                        return <StoreScreen appData={appData} refreshAppData={refreshAppData} />;
                    case 'rewards':
                        return <RewardsScreen appData={appData} refreshAppData={refreshAppData} />;
                    case 'rewards':
                        return <RewardsScreen appData={appData} refreshAppData={refreshAppData} />;
                    case 'profile':
                        return <ProfileScreen appData={appData} refreshAppData={refreshAppData} onLogout={onLogout} />;
                    default:
                        return <HomeScreen appData={appData} refreshAppData={refreshAppData} />;
                }
            };

            return (
                <>
                    {renderContent()}
                    <BottomNav activeTab={activeTab} setActiveTab={setActiveTab} />
                </>
            );
        }

        // Home Screen
        // Enhanced Home Screen with Full Activity Dashboard
        function HomeScreen({ appData, refreshAppData }) {
            // Get today's stats from appData
            const todayStats = appData?.todayStats || {
                steps: 0,
                calories: 0,
                activeMinutes: 0,
                heartPoints: 0,
                distance: 0
            };
            
            const [todaySteps, setTodaySteps] = useState(todayStats.steps);
            const [calories, setCalories] = useState(todayStats.calories);
            const [activeMinutes, setActiveMinutes] = useState(todayStats.activeMinutes);
            const [heartPoints, setHeartPoints] = useState(todayStats.heartPoints);
            
            // Advertisement slider state
            const [currentSlide, setCurrentSlide] = useState(0);
            
            // Goals
            const goalSteps = appData?.user?.dailyGoal || 10000;
            const goalCalories = 500;
            const goalActiveMinutes = 60;
            const goalHeartPoints = 30;
            
            // Calculate progress percentages
            const stepsProgress = Math.min((todaySteps / goalSteps) * 100, 100);
            const caloriesProgress = Math.min((calories / goalCalories) * 100, 100);
            const activeMinutesProgress = Math.min((activeMinutes / goalActiveMinutes) * 100, 100);
            const heartPointsProgress = Math.min((heartPoints / goalHeartPoints) * 100, 100);
            
            // Calculate activity score
            const activityScore = Math.round((stepsProgress + caloriesProgress + activeMinutesProgress + heartPointsProgress) / 4);

            // Sync with appData when it changes
            useEffect(() => {
                if (appData?.todayStats) {
                    setTodaySteps(appData.todayStats.steps);
                    setCalories(appData.todayStats.calories);
                    setActiveMinutes(appData.todayStats.activeMinutes);
                    setHeartPoints(appData.todayStats.heartPoints);
                }
            }, [appData]);

            // Auto-slide advertisement
            useEffect(() => {
                const slideInterval = setInterval(() => {
                    setCurrentSlide((prev) => (prev + 1) % 3);
                }, 4000); // Change slide every 4 seconds
                
                return () => clearInterval(slideInterval);
            }, []);

            // Advertisement slides data
            const adSlides = [
                {
                    id: 1,
                    title: 'Premium T-Shirts',
                    discount: '40% OFF',
                    description: 'Moisture-wicking performance tees',
                    icon: '',
                    gradient: 'linear-gradient(135deg, #667eea, #764ba2)',
                    price: '599',
                    originalPrice: '999',
                    color: '#667eea'
                },
                {
                    id: 2,
                    title: 'Nike Running Shoes',
                    discount: '60% OFF',
                    description: 'Professional walking shoes',
                    icon: '',
                    gradient: 'linear-gradient(135deg, #f093fb, #f5576c)',
                    price: '3,999',
                    originalPrice: '9,999',
                    color: '#f5576c'
                },
                {
                    id: 3,
                    title: 'Track Pants',
                    discount: '30% OFF',
                    description: 'Comfortable athletic wear',
                    icon: '',
                    gradient: 'linear-gradient(135deg, #4facfe, #00f2fe)',
                    price: '699',
                    originalPrice: '999',
                    color: '#00f2fe'
                }
            ];

            // Helper function to get activity score color and label
            const getActivityScoreInfo = (score) => {
                if (score >= 80) return { color: '#00A896', label: 'Excellent', emoji: '' };
                if (score >= 60) return { color: '#fdcb6e', label: 'Good', emoji: '' };
                if (score >= 40) return { color: '#f5576c', label: 'Fair', emoji: '' };
                return { color: '#999', label: 'Low', emoji: '' };
            };

            const scoreInfo = getActivityScoreInfo(activityScore);

            return (
                <>
                    <div className="app-header">
                        <div>
                            <h1>Welcome back! </h1>
                            <p style={{fontSize: '14px', color: 'var(--text-gray)', marginTop: '4px'}}>
                                {new Date().toLocaleDateString('en-US', { weekday: 'long', month: 'short', day: 'numeric' })}
                            </p>
                        </div>
                        <div className="header-icons">
                            <button className="icon-btn"></button>
                        </div>
                    </div>
                    
                    <div className="app-content">
                        {/* Advertisement Slider */}
                        <div style={{
                            position: 'relative',
                            height: '160px',
                            borderRadius: '16px',
                            overflow: 'hidden',
                            marginBottom: '20px',
                            boxShadow: '0 8px 24px rgba(0,0,0,0.15)'
                        }} className="fade-in">
                            {/* Slides Container */}
                            <div style={{
                                display: 'flex',
                                transition: 'transform 0.5s ease-in-out',
                                transform: `translateX(-${currentSlide * 100}%)`,
                                height: '100%'
                            }}>
                                {adSlides.map((slide, index) => (
                                    <div key={slide.id} style={{
                                        minWidth: '100%',
                                        height: '100%',
                                        background: slide.gradient,
                                        padding: '20px',
                                        display: 'flex',
                                        alignItems: 'center',
                                        justifyContent: 'space-between',
                                        cursor: 'pointer'
                                    }} onClick={() => {
                                        alert(` ${slide.title}\n\n${slide.description}\n\nPrice: ${slide.price}\nOriginal: ${slide.originalPrice}\n\nTap to add to cart!`);
                                    }}>
                                        {/* Left Content */}
                                        <div style={{flex: 1}}>
                                            <div style={{
                                                display: 'inline-block',
                                                background: 'rgba(255,255,255,0.3)',
                                                padding: '6px 12px',
                                                borderRadius: '20px',
                                                fontSize: '12px',
                                                fontWeight: '700',
                                                color: 'white',
                                                marginBottom: '10px',
                                                backdropFilter: 'blur(10px)'
                                            }}>
                                                {slide.discount}
                                            </div>
                                            <h3 style={{
                                                fontSize: '20px',
                                                fontWeight: '800',
                                                color: 'white',
                                                marginBottom: '6px',
                                                lineHeight: '1.2'
                                            }}>
                                                {slide.title}
                                            </h3>
                                            <p style={{
                                                fontSize: '13px',
                                                color: 'rgba(255,255,255,0.9)',
                                                marginBottom: '12px'
                                            }}>
                                                {slide.description}
                                            </p>
                                            <div style={{display: 'flex', alignItems: 'center', gap: '8px'}}>
                                                <span style={{
                                                    fontSize: '22px',
                                                    fontWeight: '800',
                                                    color: 'white'
                                                }}>
                                                    {slide.price}
                                                </span>
                                                <span style={{
                                                    fontSize: '14px',
                                                    color: 'rgba(255,255,255,0.7)',
                                                    textDecoration: 'line-through'
                                                }}>
                                                    {slide.originalPrice}
                                                </span>
                                            </div>
                                        </div>
                                        
                                        {/* Right Icon */}
                                        <div style={{
                                            fontSize: '80px',
                                            lineHeight: '1',
                                            opacity: '0.9',
                                            textAlign: 'right'
                                        }}>
                                            {slide.icon}
                                        </div>
                                    </div>
                                ))}
                            </div>

                            {/* Slide Indicators */}
                            <div style={{
                                position: 'absolute',
                                bottom: '12px',
                                left: '50%',
                                transform: 'translateX(-50%)',
                                display: 'flex',
                                gap: '8px',
                                zIndex: 10
                            }}>
                                {adSlides.map((_, index) => (
                                    <button
                                        key={index}
                                        onClick={() => setCurrentSlide(index)}
                                        style={{
                                            width: currentSlide === index ? '24px' : '8px',
                                            height: '8px',
                                            borderRadius: '4px',
                                            background: currentSlide === index 
                                                ? 'white' 
                                                : 'rgba(255,255,255,0.5)',
                                            border: 'none',
                                            cursor: 'pointer',
                                            transition: 'all 0.3s ease',
                                            padding: 0
                                        }}
                                        aria-label={`Go to slide ${index + 1}`}
                                    />
                                ))}
                            </div>

                            {/* Navigation Arrows (Optional - visible on hover) */}
                            <button
                                onClick={(e) => {
                                    e.stopPropagation();
                                    setCurrentSlide((prev) => (prev - 1 + 3) % 3);
                                }}
                                style={{
                                    position: 'absolute',
                                    left: '12px',
                                    top: '50%',
                                    transform: 'translateY(-50%)',
                                    width: '32px',
                                    height: '32px',
                                    borderRadius: '50%',
                                    background: 'rgba(255,255,255,0.3)',
                                    backdropFilter: 'blur(10px)',
                                    border: 'none',
                                    color: 'white',
                                    fontSize: '16px',
                                    cursor: 'pointer',
                                    display: 'flex',
                                    alignItems: 'center',
                                    justifyContent: 'center',
                                    zIndex: 10,
                                    transition: 'all 0.3s ease'
                                }}
                                onMouseOver={(e) => e.currentTarget.style.background = 'rgba(255,255,255,0.5)'}
                                onMouseOut={(e) => e.currentTarget.style.background = 'rgba(255,255,255,0.3)'}
                            >
                                
                            </button>
                            <button
                                onClick={(e) => {
                                    e.stopPropagation();
                                    setCurrentSlide((prev) => (prev + 1) % 3);
                                }}
                                style={{
                                    position: 'absolute',
                                    right: '12px',
                                    top: '50%',
                                    transform: 'translateY(-50%)',
                                    width: '32px',
                                    height: '32px',
                                    borderRadius: '50%',
                                    background: 'rgba(255,255,255,0.3)',
                                    backdropFilter: 'blur(10px)',
                                    border: 'none',
                                    color: 'white',
                                    fontSize: '16px',
                                    cursor: 'pointer',
                                    display: 'flex',
                                    alignItems: 'center',
                                    justifyContent: 'center',
                                    zIndex: 10,
                                    transition: 'all 0.3s ease'
                                }}
                                onMouseOver={(e) => e.currentTarget.style.background = 'rgba(255,255,255,0.5)'}
                                onMouseOut={(e) => e.currentTarget.style.background = 'rgba(255,255,255,0.3)'}
                            >
                                
                            </button>
                        </div>

                        {/* Activity Score Card */}
                        <div className="stats-card fade-in" style={{
                            background: `linear-gradient(135deg, ${scoreInfo.color}15, ${scoreInfo.color}05)`,
                            border: `2px solid ${scoreInfo.color}30`
                        }}>
                            <div style={{display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: '16px'}}>
                                <div>
                                    <div className="stat-label">Activity Score</div>
                                    <div style={{fontSize: '48px', fontWeight: '800', color: scoreInfo.color, lineHeight: '1'}}>
                                        {activityScore}
                                    </div>
                                    <div style={{fontSize: '14px', color: scoreInfo.color, fontWeight: '600', marginTop: '4px'}}>
                                        {scoreInfo.emoji} {scoreInfo.label}
                                    </div>
                                </div>
                                <div style={{
                                    width: '80px',
                                    height: '80px',
                                    borderRadius: '50%',
                                    background: `conic-gradient(${scoreInfo.color} ${activityScore * 3.6}deg, #f0f0f0 0deg)`,
                                    display: 'flex',
                                    alignItems: 'center',
                                    justifyContent: 'center',
                                    position: 'relative'
                                }}>
                                    <div style={{
                                        width: '60px',
                                        height: '60px',
                                        borderRadius: '50%',
                                        background: 'white',
                                        display: 'flex',
                                        alignItems: 'center',
                                        justifyContent: 'center',
                                        fontSize: '24px'
                                    }}>
                                        {scoreInfo.emoji}
                                    </div>
                                </div>
                            </div>
                            <div className="stat-label" style={{fontSize: '12px'}}>
                                Based on steps, calories, active time, and heart points
                            </div>
                        </div>

                        {/* Main Activity Metrics Grid */}
                        <div style={{
                            display: 'grid',
                            gridTemplateColumns: 'repeat(2, 1fr)',
                            gap: '12px',
                            marginBottom: '20px'
                        }}>
                            {/* Steps Card */}
                            <div className="stats-card slide-up" style={{animationDelay: '0.1s'}}>
                                <div style={{display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: '12px'}}>
                                    <div className="quick-stat-icon" style={{fontSize: '28px'}}></div>
                                    <div style={{fontSize: '11px', color: 'var(--text-light)'}}>
                                        {Math.round(stepsProgress)}%
                                    </div>
                                </div>
                                <div style={{fontSize: '24px', fontWeight: '700', color: 'var(--text-dark)', marginBottom: '4px'}}>
                                    {todaySteps.toLocaleString()}
                                </div>
                                <div className="stat-label" style={{marginBottom: '8px'}}>Steps</div>
                                <div className="progress-bar" style={{height: '6px'}}>
                                    <div className="progress-fill" style={{
                                        width: `${Math.min(stepsProgress, 100)}%`,
                                        background: stepsProgress >= 100 ? '#00A896' : 'var(--primary)'
                                    }}></div>
                                </div>
                                <div style={{fontSize: '11px', color: 'var(--text-gray)', marginTop: '4px'}}>
                                    Goal: {goalSteps.toLocaleString()}
                                </div>
                            </div>

                            {/* Calories Card */}
                            <div className="stats-card slide-up" style={{animationDelay: '0.15s'}}>
                                <div style={{display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: '12px'}}>
                                    <div className="quick-stat-icon" style={{fontSize: '28px'}}></div>
                                    <div style={{fontSize: '11px', color: 'var(--text-light)'}}>
                                        {Math.round(caloriesProgress)}%
                                    </div>
                                </div>
                                <div style={{fontSize: '24px', fontWeight: '700', color: 'var(--text-dark)', marginBottom: '4px'}}>
                                    {calories}
                                </div>
                                <div className="stat-label" style={{marginBottom: '8px'}}>Calories</div>
                                <div className="progress-bar" style={{height: '6px'}}>
                                    <div className="progress-fill" style={{
                                        width: `${Math.min(caloriesProgress, 100)}%`,
                                        background: caloriesProgress >= 100 ? '#00A896' : '#f5576c'
                                    }}></div>
                                </div>
                                <div style={{fontSize: '11px', color: 'var(--text-gray)', marginTop: '4px'}}>
                                    Goal: {goalCalories} kcal
                                </div>
                            </div>

                            {/* Active Minutes Card */}
                            <div className="stats-card slide-up" style={{animationDelay: '0.2s'}}>
                                <div style={{display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: '12px'}}>
                                    <div className="quick-stat-icon" style={{fontSize: '28px'}}></div>
                                    <div style={{fontSize: '11px', color: 'var(--text-light)'}}>
                                        {Math.round(activeMinutesProgress)}%
                                    </div>
                                </div>
                                <div style={{fontSize: '24px', fontWeight: '700', color: 'var(--text-dark)', marginBottom: '4px'}}>
                                    {activeMinutes}
                                </div>
                                <div className="stat-label" style={{marginBottom: '8px'}}>Active Minutes</div>
                                <div className="progress-bar" style={{height: '6px'}}>
                                    <div className="progress-fill" style={{
                                        width: `${Math.min(activeMinutesProgress, 100)}%`,
                                        background: activeMinutesProgress >= 100 ? '#00A896' : '#667eea'
                                    }}></div>
                                </div>
                                <div style={{fontSize: '11px', color: 'var(--text-gray)', marginTop: '4px'}}>
                                    Goal: {goalActiveMinutes} min
                                </div>
                            </div>

                            {/* Heart Points Card */}
                            <div className="stats-card slide-up" style={{animationDelay: '0.25s'}}>
                                <div style={{display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: '12px'}}>
                                    <div className="quick-stat-icon" style={{fontSize: '28px'}}></div>
                                    <div style={{fontSize: '11px', color: 'var(--text-light)'}}>
                                        {Math.round(heartPointsProgress)}%
                                    </div>
                                </div>
                                <div style={{fontSize: '24px', fontWeight: '700', color: 'var(--text-dark)', marginBottom: '4px'}}>
                                    {heartPoints}
                                </div>
                                <div className="stat-label" style={{marginBottom: '8px'}}>Heart Points</div>
                                <div className="progress-bar" style={{height: '6px'}}>
                                    <div className="progress-fill" style={{
                                        width: `${Math.min(heartPointsProgress, 100)}%`,
                                        background: heartPointsProgress >= 100 ? '#00A896' : '#e17055'
                                    }}></div>
                                </div>
                                <div style={{fontSize: '11px', color: 'var(--text-gray)', marginTop: '4px'}}>
                                    Goal: {goalHeartPoints} points
                                </div>
                            </div>
                        </div>

                        {/* Additional Stats Row */}
                        <div className="quick-stats slide-up" style={{animationDelay: '0.3s', marginBottom: '20px'}}>
                            <div className="quick-stat">
                                <div className="quick-stat-icon"></div>
                                <div className="quick-stat-value">{(todaySteps * 0.000762).toFixed(1)}</div>
                                <div className="quick-stat-label">Miles</div>
                            </div>
                            <div className="quick-stat">
                                <div className="quick-stat-icon"></div>
                                <div className="quick-stat-value">{Math.round(activeMinutes / 60 * 100) / 100}</div>
                                <div className="quick-stat-label">Active Hours</div>
                            </div>
                            <div className="quick-stat">
                                <div className="quick-stat-icon"></div>
                                <div className="quick-stat-value">{Math.round(todaySteps / activeMinutes)}</div>
                                <div className="quick-stat-label">Pace</div>
                            </div>
                        </div>

                        {/* Daily Goals Summary */}
                        <div className="section-header">
                            <h3>Daily Goals Progress</h3>
                            <span style={{fontSize: '14px', color: 'var(--text-gray)'}}>
                                {[stepsProgress >= 100, caloriesProgress >= 100, activeMinutesProgress >= 100, heartPointsProgress >= 100].filter(Boolean).length}/4 Complete
                            </span>
                        </div>

                        <div className="stats-card slide-up" style={{animationDelay: '0.35s'}}>
                            <div style={{display: 'flex', gap: '12px', marginBottom: '16px'}}>
                                {[
                                    { label: 'Steps', progress: stepsProgress, color: 'var(--primary)' },
                                    { label: 'Calories', progress: caloriesProgress, color: '#f5576c' },
                                    { label: 'Active', progress: activeMinutesProgress, color: '#667eea' },
                                    { label: 'Heart', progress: heartPointsProgress, color: '#e17055' }
                                ].map((goal, idx) => (
                                    <div key={idx} style={{flex: 1, textAlign: 'center'}}>
                                        <div style={{
                                            width: '100%',
                                            height: '8px',
                                            background: '#f0f0f0',
                                            borderRadius: '4px',
                                            overflow: 'hidden',
                                            marginBottom: '8px'
                                        }}>
                                            <div style={{
                                                width: `${Math.min(goal.progress, 100)}%`,
                                                height: '100%',
                                                background: goal.progress >= 100 ? '#00A896' : goal.color,
                                                transition: 'width 0.3s ease'
                                            }}></div>
                                        </div>
                                        <div style={{fontSize: '11px', fontWeight: '600', color: 'var(--text-dark)'}}>
                                            {Math.round(goal.progress)}%
                                        </div>
                                        <div style={{fontSize: '10px', color: 'var(--text-gray)', marginTop: '2px'}}>
                                            {goal.label}
                                        </div>
                                    </div>
                                ))}
                            </div>
                            {stepsProgress >= 100 && caloriesProgress >= 100 && activeMinutesProgress >= 100 && heartPointsProgress >= 100 ? (
                                <div style={{
                                    background: 'linear-gradient(135deg, #00A89615, #00A89605)',
                                    padding: '12px',
                                    borderRadius: '8px',
                                    textAlign: 'center',
                                    border: '2px solid #00A89630'
                                }}>
                                    <div style={{fontSize: '20px', marginBottom: '4px'}}></div>
                                    <div style={{fontSize: '14px', fontWeight: '600', color: '#00A896'}}>
                                        All Goals Achieved!
                                    </div>
                                </div>
                            ) : (
                                <div style={{fontSize: '12px', color: 'var(--text-gray)', textAlign: 'center'}}>
                                    Keep moving! You're doing great 
                                </div>
                            )}
                        </div>

                        <div className="section-header">
                            <h3>Active Challenges</h3>
                            <a className="section-link">View All</a>
                        </div>

                        <div className="challenge-card slide-up" style={{animationDelay: '0.4s'}}>
                            <div className="challenge-header">
                                <div>
                                    <div className="challenge-title">February Step Challenge</div>
                                    <div className="challenge-subtitle">28 days  280,000 steps target</div>
                                </div>
                                <div className="challenge-badge">Day 12</div>
                            </div>
                            <div className="progress-bar">
                                <div className="progress-fill" style={{width: '42%'}}></div>
                            </div>
                            <div className="stat-label">117,500 / 280,000 steps (42%)</div>
                        </div>

                        <div className="section-header">
                            <h3>Upcoming Events</h3>
                            <a className="section-link">See All</a>
                        </div>

                        <div className="event-card slide-up" style={{animationDelay: '0.45s'}}>
                            <div className="event-image"></div>
                            <div className="event-content">
                                <div className="event-date">Mar 15, 2026</div>
                                <div className="event-title">Spring Marathon 2026</div>
                                <div className="event-meta">
                                    <span> Central Park</span>
                                    <span> 234 joined</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </>
            );
        }

        // Stats Screen
        function StatsScreen({ appData, refreshAppData }) {
            const [timeframe, setTimeframe] = useState('week');
            const [showTrackingModal, setShowTrackingModal] = useState(false);
            const [showManualModal, setShowManualModal] = useState(false);
            const [isTracking, setIsTracking] = useState(false);
            const [trackingTime, setTrackingTime] = useState(0);
            const [trackingData, setTrackingData] = useState({
                steps: 0,
                distance: 0,
                calories: 0,
                type: 'walk'
            });
            const [manualFormData, setManualFormData] = useState({
                type: 'walk',
                steps: '',
                duration: '',
                distance: '',
                notes: ''
            });

            // Weekly and monthly data
            const weeklyData = [
                { day: 'Mon', steps: 8234 },
                { day: 'Tue', steps: 9456 },
                { day: 'Wed', steps: 7891 },
                { day: 'Thu', steps: 10234 },
                { day: 'Fri', steps: 8765 },
                { day: 'Sat', steps: 11234 },
                { day: 'Sun', steps: 9876 }
            ];

            const monthlyData = [
                { week: 'W1', steps: 67234 },
                { week: 'W2', steps: 72456 },
                { week: 'W3', steps: 68891 },
                { week: 'W4', steps: 75234 }
            ];

            // Activity history from appData
            const activities = appData?.activities || [];

            // Timer for tracking
            useEffect(() => {
                let interval;
                if (isTracking) {
                    interval = setInterval(() => {
                        setTrackingTime(prev => prev + 1);
                        // Simulate activity data increase
                        setTrackingData(prev => ({
                            ...prev,
                            steps: prev.steps + Math.floor(Math.random() * 15) + 5,
                            distance: prev.distance + 0.008,
                            calories: prev.calories + 0.06
                        }));
                    }, 1000);
                }
                return () => clearInterval(interval);
            }, [isTracking]);

            const formatTime = (seconds) => {
                const mins = Math.floor(seconds / 60);
                const secs = seconds % 60;
                return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
            };

            const startWorkout = (type = 'walk') => {
                setTrackingData({
                    steps: 0,
                    distance: 0,
                    calories: 0,
                    type: type
                });
                setTrackingTime(0);
                setIsTracking(true);
                setShowTrackingModal(true);
            };

            const pauseWorkout = () => {
                setIsTracking(false);
            };

            const resumeWorkout = () => {
                setIsTracking(true);
            };

            const finishWorkout = () => {
                const activity = {
                    type: trackingData.type,
                    steps: trackingData.steps,
                    distance: parseFloat(trackingData.distance.toFixed(2)),
                    calories: Math.floor(trackingData.calories),
                    duration: trackingTime,
                    timestamp: new Date().toISOString()
                };
                
                AppDataManager.addActivity(activity);
                refreshAppData();
                
                setIsTracking(false);
                setShowTrackingModal(false);
                setTrackingTime(0);
            };

            const handleManualSubmit = (e) => {
                e.preventDefault();
                
                const activity = {
                    type: manualFormData.type,
                    steps: parseInt(manualFormData.steps) || 0,
                    distance: parseFloat(manualFormData.distance) || 0,
                    calories: Math.floor(parseInt(manualFormData.steps) * 0.04) || 0,
                    duration: parseInt(manualFormData.duration) * 60 || 0,
                    notes: manualFormData.notes,
                    timestamp: new Date().toISOString(),
                    manual: true
                };
                
                AppDataManager.addActivity(activity);
                refreshAppData();
                
                setShowManualModal(false);
                setManualFormData({
                    type: 'walk',
                    steps: '',
                    duration: '',
                    distance: '',
                    notes: ''
                });
            };

            const getActivityIcon = (type) => {
                const icons = {
                    walk: '',
                    run: '',
                    hike: '',
                    bike: '',
                    other: ''
                };
                return icons[type] || '';
            };

            const formatActivityTime = (timestamp) => {
                const date = new Date(timestamp);
                const now = new Date();
                const diff = now - date;
                const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                
                if (days === 0) return 'Today';
                if (days === 1) return 'Yesterday';
                if (days < 7) return `${days} days ago`;
                return date.toLocaleDateString();
            };

            return (
                <>
                    <div className="app-header">
                        <h1>Activity </h1>
                    </div>
                    <div className="app-content">
                        {/* Action Buttons */}
                        <div className="action-buttons-grid fade-in">
                            <button className="action-btn" onClick={() => startWorkout('walk')}>
                                <div className="action-btn-icon"></div>
                                <div className="action-btn-text">Start Workout</div>
                            </button>
                            <button className="action-btn secondary" onClick={() => setShowManualModal(true)}>
                                <div className="action-btn-icon"></div>
                                <div className="action-btn-text">Log Manually</div>
                            </button>
                        </div>

                        {/* Quick Actions */}
                        <div className="quick-actions fade-in">
                            <button className="quick-btn" onClick={() => startWorkout('walk')}>
                                <div className="quick-btn-icon"></div>
                                <div className="quick-btn-label">Walk</div>
                            </button>
                            <button className="quick-btn" onClick={() => startWorkout('run')}>
                                <div className="quick-btn-icon"></div>
                                <div className="quick-btn-label">Run</div>
                            </button>
                            <button className="quick-btn" onClick={() => startWorkout('bike')}>
                                <div className="quick-btn-icon"></div>
                                <div className="quick-btn-label">Bike</div>
                            </button>
                        </div>

                        {/* Activity History */}
                        {activities.length > 0 && (
                            <>
                                <div className="section-header">
                                    <h3>Recent Activities</h3>
                                </div>
                                {activities.slice(0, 5).map((activity, idx) => (
                                    <div key={idx} className="activity-history-card slide-up" style={{animationDelay: `${idx * 0.1}s`}}>
                                        <div className="activity-history-icon">
                                            {getActivityIcon(activity.type)}
                                        </div>
                                        <div className="activity-history-details">
                                            <div className="activity-history-title">
                                                {activity.type.charAt(0).toUpperCase() + activity.type.slice(1)}
                                                {activity.manual && <span style={{fontSize: '12px', color: 'var(--text-gray)', marginLeft: '8px'}}> Manual</span>}
                                            </div>
                                            <div className="activity-history-meta">
                                                {activity.steps} steps  {activity.distance} km  {activity.calories} kcal
                                            </div>
                                            <div className="activity-history-time">
                                                {formatActivityTime(activity.timestamp)}
                                            </div>
                                        </div>
                                    </div>
                                ))}
                            </>
                        )}

                        <div className="tab-nav">
                            <button 
                                className={`tab-btn ${timeframe === 'week' ? 'active' : ''}`}
                                onClick={() => setTimeframe('week')}
                            >
                                Week
                            </button>
                            <button 
                                className={`tab-btn ${timeframe === 'month' ? 'active' : ''}`}
                                onClick={() => setTimeframe('month')}
                            >
                                Month
                            </button>
                            <button 
                                className={`tab-btn ${timeframe === 'year' ? 'active' : ''}`}
                                onClick={() => setTimeframe('year')}
                            >
                                Year
                            </button>
                        </div>

                        <div className="chart-container fade-in">
                            <div className="chart-header">
                                <div className="chart-title">
                                    {timeframe === 'week' ? 'This Week' : timeframe === 'month' ? 'This Month' : 'This Year'}
                                </div>
                            </div>
                            <SimpleBarChart 
                                data={timeframe === 'week' ? weeklyData : monthlyData}
                                dataKey="steps"
                            />
                        </div>

                        <div className="section-header">
                            <h3>Overall Statistics</h3>
                        </div>

                        <div className="card">
                            <div style={{display: 'flex', justifyContent: 'space-between', marginBottom: '16px'}}>
                                <div>
                                    <div style={{fontSize: '14px', color: 'var(--text-gray)', marginBottom: '4px'}}>Total Steps</div>
                                    <div style={{fontSize: '24px', fontWeight: '700', color: 'var(--text-dark)'}}>
                                        {activities.reduce((sum, a) => sum + (a.steps || 0), 0).toLocaleString()}
                                    </div>
                                </div>
                                <div style={{textAlign: 'right'}}>
                                    <div style={{fontSize: '14px', color: 'var(--text-gray)', marginBottom: '4px'}}>Total Distance</div>
                                    <div style={{fontSize: '24px', fontWeight: '700', color: 'var(--primary)'}}>
                                        {activities.reduce((sum, a) => sum + (a.distance || 0), 0).toFixed(1)} km
                                    </div>
                                </div>
                            </div>
                            <div style={{display: 'flex', justifyContent: 'space-between'}}>
                                <div>
                                    <div style={{fontSize: '14px', color: 'var(--text-gray)', marginBottom: '4px'}}>Active Days</div>
                                    <div style={{fontSize: '24px', fontWeight: '700', color: 'var(--text-dark)'}}>{activities.length}</div>
                                </div>
                                <div style={{textAlign: 'right'}}>
                                    <div style={{fontSize: '14px', color: 'var(--text-gray)', marginBottom: '4px'}}>Calories Burned</div>
                                    <div style={{fontSize: '24px', fontWeight: '700', color: 'var(--accent)'}}>
                                        {activities.reduce((sum, a) => sum + (a.calories || 0), 0).toLocaleString()}
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div className="section-header">
                            <h3>Personal Bests</h3>
                        </div>

                        <div className="card">
                            <div style={{display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '12px'}}>
                                <span style={{color: 'var(--text-dark)', fontWeight: '600'}}> Most steps in a day</span>
                                <span style={{color: 'var(--primary)', fontWeight: '700'}}>
                                    {activities.length > 0 ? Math.max(...activities.map(a => a.steps || 0)).toLocaleString() : '0'}
                                </span>
                            </div>
                            <div style={{display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '12px'}}>
                                <span style={{color: 'var(--text-dark)', fontWeight: '600'}}> Total Activities</span>
                                <span style={{color: 'var(--primary)', fontWeight: '700'}}>{activities.length}</span>
                            </div>
                            <div style={{display: 'flex', justifyContent: 'space-between', alignItems: 'center'}}>
                                <span style={{color: 'var(--text-dark)', fontWeight: '600'}}> Longest distance</span>
                                <span style={{color: 'var(--primary)', fontWeight: '700'}}>
                                    {activities.length > 0 ? Math.max(...activities.map(a => a.distance || 0)).toFixed(1) + ' km' : '0 km'}
                                </span>
                            </div>
                        </div>

                        {/* Programs Section */}
                        <div className="section-header" style={{marginTop: '32px'}}>
                            <h3> Programs</h3>
                        </div>

                        {appData?.programs && appData.programs.length > 0 ? (
                            <>
                                {appData.programs.slice(0, 3).map((program, idx) => (
                                    <div key={idx} className="program-card slide-up" style={{animationDelay: `${idx * 0.1}s`, marginBottom: '12px'}}>
                                        <div className="program-header">
                                            <div className="program-icon" style={{background: program.color}}>
                                                {program.icon}
                                            </div>
                                            <div className="program-info">
                                                <h4>{program.title}</h4>
                                                <p>{program.description}</p>
                                            </div>
                                        </div>
                                        <div className="program-progress">
                                            <div className="program-progress-bar">
                                                <div 
                                                    className="program-progress-fill" 
                                                    style={{
                                                        width: `${program.progress || 0}%`,
                                                        background: program.color
                                                    }}
                                                ></div>
                                            </div>
                                            <div className="program-progress-text">
                                                <span>{program.progress || 0}% Complete</span>
                                                <span>{program.completed ? 'Completed! ' : 'In Progress'}</span>
                                            </div>
                                        </div>
                                    </div>
                                ))}
                            </>
                        ) : (
                            <div className="card" style={{textAlign: 'center', padding: '30px'}}>
                                <div style={{fontSize: '48px', marginBottom: '12px'}}></div>
                                <div style={{fontSize: '16px', color: 'var(--text-gray)', marginBottom: '16px'}}>
                                    No programs enrolled yet
                                </div>
                                <button 
                                    className="btn" 
                                    onClick={() => alert(' Tap the Programs tab to browse and enroll in available programs!')}
                                    style={{margin: '0 auto'}}
                                >
                                    Browse Programs
                                </button>
                            </div>
                        )}

                        {/* Rewards Section */}
                        <div className="section-header" style={{marginTop: '32px'}}>
                            <h3> Rewards</h3>
                        </div>

                        <div className="reward-card fade-in" style={{marginBottom: '16px'}}>
                            <div className="reward-label">Your Reward Points</div>
                            <div className="reward-points">{appData?.rewards?.points?.toLocaleString() || '0'}</div>
                            <div className="reward-value">Worth ${((appData?.rewards?.points || 0) / 100).toFixed(2)} in store credit</div>
                            <button 
                                className="btn" 
                                style={{background: 'white', color: '#f5576c', fontWeight: '700'}}
                                onClick={() => alert(' View the Rewards tab to see all your achievements, badges, and reward points!')}
                            >
                                View All Rewards
                            </button>
                        </div>

                        <div className="card" style={{marginBottom: '20px'}}>
                            <div style={{fontSize: '14px', fontWeight: '600', color: 'var(--text-dark)', marginBottom: '12px'}}>
                                How to Earn Points
                            </div>
                            <div style={{display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '8px'}}>
                                <span style={{color: 'var(--text-gray)', fontSize: '13px'}}> Per 100 steps</span>
                                <span style={{color: 'var(--primary)', fontWeight: '700', fontSize: '13px'}}>+1 pt</span>
                            </div>
                            <div style={{display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '8px'}}>
                                <span style={{color: 'var(--text-gray)', fontSize: '13px'}}> Complete daily goal</span>
                                <span style={{color: 'var(--primary)', fontWeight: '700', fontSize: '13px'}}>+50 pts</span>
                            </div>
                            <div style={{display: 'flex', justifyContent: 'space-between', alignItems: 'center'}}>
                                <span style={{color: 'var(--text-gray)', fontSize: '13px'}}> Complete program</span>
                                <span style={{color: 'var(--primary)', fontWeight: '700', fontSize: '13px'}}>+200 pts</span>
                            </div>
                        </div>
                    </div>

                    {/* Tracking Modal */}
                    {showTrackingModal && (
                        <div className="modal-overlay" onClick={() => !isTracking && setShowTrackingModal(false)}>
                            <div className="modal-content" onClick={(e) => e.stopPropagation()}>
                                <div className="modal-header">
                                    <div className="modal-title">
                                        {isTracking ? ' Workout in Progress' : ' Workout Paused'}
                                    </div>
                                    {!isTracking && (
                                        <button className="modal-close" onClick={() => setShowTrackingModal(false)}>
                                            
                                        </button>
                                    )}
                                </div>

                                <div className="tracking-status">
                                    <div className="tracking-icon">
                                        {getActivityIcon(trackingData.type)}
                                    </div>
                                    <div className="tracking-time">{formatTime(trackingTime)}</div>

                                    <div className="tracking-stats">
                                        <div className="tracking-stat">
                                            <div className="tracking-stat-value">{trackingData.steps}</div>
                                            <div className="tracking-stat-label">Steps</div>
                                        </div>
                                        <div className="tracking-stat">
                                            <div className="tracking-stat-value">{trackingData.distance.toFixed(2)}</div>
                                            <div className="tracking-stat-label">km</div>
                                        </div>
                                        <div className="tracking-stat">
                                            <div className="tracking-stat-value">{Math.floor(trackingData.calories)}</div>
                                            <div className="tracking-stat-label">kcal</div>
                                        </div>
                                    </div>

                                    <div className="button-group">
                                        {isTracking ? (
                                            <>
                                                <button className="btn btn-secondary" style={{flex: 1}} onClick={pauseWorkout}>
                                                     Pause
                                                </button>
                                                <button className="btn" style={{flex: 1}} onClick={finishWorkout}>
                                                     Finish
                                                </button>
                                            </>
                                        ) : (
                                            <>
                                                <button className="btn btn-secondary" style={{flex: 1}} onClick={resumeWorkout}>
                                                     Resume
                                                </button>
                                                <button className="btn" style={{flex: 1}} onClick={finishWorkout}>
                                                     Save
                                                </button>
                                            </>
                                        )}
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Manual Log Modal */}
                    {showManualModal && (
                        <div className="modal-overlay" onClick={() => setShowManualModal(false)}>
                            <div className="modal-content" onClick={(e) => e.stopPropagation()}>
                                <div className="modal-header">
                                    <div className="modal-title"> Log Activity</div>
                                    <button className="modal-close" onClick={() => setShowManualModal(false)}>
                                        
                                    </button>
                                </div>

                                <form onSubmit={handleManualSubmit}>
                                    <div className="form-group">
                                        <label className="form-label">Activity Type</label>
                                        <select 
                                            className="form-select" 
                                            value={manualFormData.type}
                                            onChange={(e) => setManualFormData({...manualFormData, type: e.target.value})}
                                            required
                                        >
                                            <option value="walk">Walking</option>
                                            <option value="run">Running</option>
                                            <option value="hike">Hiking</option>
                                            <option value="bike">Cycling</option>
                                            <option value="other">Other</option>
                                        </select>
                                    </div>

                                    <div className="form-group">
                                        <label className="form-label">Steps</label>
                                        <input 
                                            type="number"
                                            className="form-input"
                                            placeholder="Enter steps..."
                                            value={manualFormData.steps}
                                            onChange={(e) => setManualFormData({...manualFormData, steps: e.target.value})}
                                            required
                                        />
                                    </div>

                                    <div className="form-group">
                                        <label className="form-label">Duration (minutes)</label>
                                        <input 
                                            type="number"
                                            className="form-input"
                                            placeholder="Enter duration..."
                                            value={manualFormData.duration}
                                            onChange={(e) => setManualFormData({...manualFormData, duration: e.target.value})}
                                            required
                                        />
                                    </div>

                                    <div className="form-group">
                                        <label className="form-label">Distance (km)</label>
                                        <input 
                                            type="number"
                                            step="0.1"
                                            className="form-input"
                                            placeholder="Enter distance..."
                                            value={manualFormData.distance}
                                            onChange={(e) => setManualFormData({...manualFormData, distance: e.target.value})}
                                        />
                                    </div>

                                    <div className="form-group">
                                        <label className="form-label">Notes (optional)</label>
                                        <textarea 
                                            className="form-textarea"
                                            placeholder="Add any notes..."
                                            value={manualFormData.notes}
                                            onChange={(e) => setManualFormData({...manualFormData, notes: e.target.value})}
                                        />
                                    </div>

                                    <div className="button-group">
                                        <button type="button" className="btn btn-secondary" style={{flex: 1}} onClick={() => setShowManualModal(false)}>
                                            Cancel
                                        </button>
                                        <button type="submit" className="btn" style={{flex: 1}}>
                                            Log Activity
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    )}
                </>
            );
        }
        // Programs Screen
        function ProgramsScreen({ appData, refreshAppData }) {
            const [showEnrollModal, setShowEnrollModal] = useState(false);
            const [selectedProgram, setSelectedProgram] = useState(null);

            const availablePrograms = [
                {
                    id: 1,
                    icon: '',
                    title: "Beginner's 30-Day Challenge",
                    description: 'Perfect for starting your walking journey',
                    duration: '30 days',
                    difficulty: 'Beginner',
                    color: 'linear-gradient(135deg, #e0f2f1, #b2dfdb)'
                },
                {
                    id: 2,
                    icon: '',
                    title: '10K Steps Daily',
                    description: 'Build consistency with daily goals',
                    duration: '60 days',
                    difficulty: 'Intermediate',
                    color: 'linear-gradient(135deg, #ffeaa7, #fdcb6e)'
                },
                {
                    id: 3,
                    icon: '',
                    title: 'Speed Walking Program',
                    description: 'Improve your pace and endurance',
                    duration: '45 days',
                    difficulty: 'Advanced',
                    color: 'linear-gradient(135deg, #a29bfe, #6c5ce7)'
                },
                {
                    id: 4,
                    icon: '',
                    title: 'Hill Climbing Challenge',
                    description: 'Conquer elevation and build strength',
                    duration: '90 days',
                    difficulty: 'Advanced',
                    color: 'linear-gradient(135deg, #fd79a8, #e84393)'
                },
                {
                    id: 5,
                    icon: '',
                    title: 'Beach Walk Series',
                    description: 'Enjoy scenic coastal walks',
                    duration: '30 days',
                    difficulty: 'Beginner',
                    color: 'linear-gradient(135deg, #74b9ff, #0984e3)'
                }
            ];

            const enrolledPrograms = appData?.programs || [];

            const isEnrolled = (programId) => {
                return enrolledPrograms.some(p => p.id === programId);
            };

            const handleEnroll = (program) => {
                setSelectedProgram(program);
                setShowEnrollModal(true);
            };

            const confirmEnroll = () => {
                if (selectedProgram) {
                    AppDataManager.enrollProgram(selectedProgram);
                    refreshAppData();
                    setShowEnrollModal(false);
                    setSelectedProgram(null);
                }
            };

            const updateProgress = (programId, newProgress) => {
                const data = AppDataManager.getData();
                const programIndex = data.programs.findIndex(p => p.id === programId);
                if (programIndex !== -1) {
                    data.programs[programIndex].progress = newProgress;
                    if (newProgress >= 100) {
                        data.programs[programIndex].completed = true;
                    }
                    AppDataManager.saveData(data);
                    refreshAppData();
                }
            };

            return (
                <>
                    <div className="app-header">
                        <h1>Programs </h1>
                    </div>
                    <div className="app-content">
                        {enrolledPrograms.length > 0 && (
                            <>
                                <div className="section-header">
                                    <h3>Your Active Programs</h3>
                                </div>

                                {enrolledPrograms.map((program, idx) => (
                                    <div key={idx} className="program-card enrolled-program slide-up" style={{animationDelay: `${idx * 0.1}s`}}>
                                        <div className="enrolled-badge">Enrolled</div>
                                        <div className="program-header">
                                            <div className="program-icon" style={{background: program.color}}>
                                                {program.icon}
                                            </div>
                                            <div className="program-info">
                                                <h4>{program.title}</h4>
                                                <p>{program.description}</p>
                                            </div>
                                        </div>
                                        <div className="program-progress">
                                            <div className="program-progress-bar">
                                                <div 
                                                    className="program-progress-fill" 
                                                    style={{
                                                        width: `${program.progress || 0}%`,
                                                        background: program.color
                                                    }}
                                                ></div>
                                            </div>
                                            <div className="program-progress-text">
                                                <span>{program.progress || 0}% Complete</span>
                                                <span>{program.completed ? 'Completed! ' : 'In Progress'}</span>
                                            </div>
                                        </div>
                                        {!program.completed && (
                                            <button 
                                                className="btn" 
                                                style={{marginTop: '12px', width: '100%'}}
                                                onClick={() => updateProgress(program.id, Math.min((program.progress || 0) + 10, 100))}
                                            >
                                                Update Progress +10%
                                            </button>
                                        )}
                                    </div>
                                ))}
                            </>
                        )}

                        <div className="section-header" style={{marginTop: enrolledPrograms.length > 0 ? '32px' : '0'}}>
                            <h3>Available Programs</h3>
                        </div>

                        {availablePrograms.filter(p => !isEnrolled(p.id)).map((program, idx) => (
                            <div key={idx} className="program-card slide-up" style={{animationDelay: `${idx * 0.1}s`}}>
                                <div className="program-header">
                                    <div className="program-icon" style={{background: program.color}}>
                                        {program.icon}
                                    </div>
                                    <div className="program-info">
                                        <h4>{program.title}</h4>
                                        <p>{program.description}</p>
                                        <div style={{fontSize: '13px', color: 'var(--text-gray)', marginTop: '8px'}}>
                                            {program.duration}  {program.difficulty}
                                        </div>
                                    </div>
                                </div>
                                <button 
                                    className="btn" 
                                    style={{marginTop: '16px', width: '100%'}}
                                    onClick={() => handleEnroll(program)}
                                >
                                    Enroll in Program
                                </button>
                            </div>
                        ))}

                        {availablePrograms.filter(p => !isEnrolled(p.id)).length === 0 && enrolledPrograms.length > 0 && (
                            <div className="empty-state">
                                <div className="empty-state-icon"></div>
                                <div className="empty-state-text">You're enrolled in all available programs!</div>
                            </div>
                        )}
                    </div>

                    {/* Enrollment Confirmation Modal */}
                    {showEnrollModal && selectedProgram && (
                        <div className="modal-overlay" onClick={() => setShowEnrollModal(false)}>
                            <div className="modal-content" onClick={(e) => e.stopPropagation()}>
                                <div className="modal-header">
                                    <div className="modal-title">Enroll in Program</div>
                                    <button className="modal-close" onClick={() => setShowEnrollModal(false)}>
                                        
                                    </button>
                                </div>

                                <div style={{textAlign: 'center', padding: '20px 0'}}>
                                    <div style={{fontSize: '64px', marginBottom: '16px'}}>{selectedProgram.icon}</div>
                                    <h3 style={{marginBottom: '8px'}}>{selectedProgram.title}</h3>
                                    <p style={{color: 'var(--text-gray)', marginBottom: '24px'}}>{selectedProgram.description}</p>
                                    
                                    <div style={{background: 'var(--bg-light)', padding: '16px', borderRadius: '12px', marginBottom: '24px'}}>
                                        <div style={{display: 'flex', justifyContent: 'space-around'}}>
                                            <div>
                                                <div style={{fontSize: '20px', fontWeight: '700', color: 'var(--primary)'}}>{selectedProgram.duration}</div>
                                                <div style={{fontSize: '13px', color: 'var(--text-gray)'}}>Duration</div>
                                            </div>
                                            <div>
                                                <div style={{fontSize: '20px', fontWeight: '700', color: 'var(--primary)'}}>{selectedProgram.difficulty}</div>
                                                <div style={{fontSize: '13px', color: 'var(--text-gray)'}}>Level</div>
                                            </div>
                                        </div>
                                    </div>

                                    <div className="button-group">
                                        <button className="btn btn-secondary" style={{flex: 1}} onClick={() => setShowEnrollModal(false)}>
                                            Cancel
                                        </button>
                                        <button className="btn" style={{flex: 1}} onClick={confirmEnroll}>
                                            Enroll Now
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}
                </>
            );
        }

        // Events Screen
        function EventsScreen() {
            const upcomingEvents = [
                {
                    title: 'Spring Marathon 2026',
                    date: 'Mar 15, 2026',
                    location: 'Central Park',
                    participants: 234,
                    icon: '',
                    color: 'linear-gradient(135deg, #f093fb, #f5576c)'
                },
                {
                    title: 'Charity Walk for Health',
                    date: 'Mar 22, 2026',
                    location: 'Riverside Trail',
                    participants: 156,
                    icon: '',
                    color: 'linear-gradient(135deg, #fdcb6e, #e17055)'
                },
                {
                    title: 'Night Walk Under Stars',
                    date: 'Apr 5, 2026',
                    location: 'Mountain View',
                    participants: 89,
                    icon: '',
                    color: 'linear-gradient(135deg, #6c5ce7, #a29bfe)'
                }
            ];

            return (
                <>
                    <div className="app-header">
                        <h1>Events </h1>
                    </div>
                    <div className="app-content">
                        <div className="section-header">
                            <h3>Upcoming Events</h3>
                        </div>

                        {upcomingEvents.map((event, idx) => (
                            <div key={idx} className="event-card slide-up" style={{animationDelay: `${idx * 0.1}s`}}>
                                <div className="event-image" style={{background: event.color}}>
                                    {event.icon}
                                </div>
                                <div className="event-content">
                                    <div className="event-date">{event.date}</div>
                                    <div className="event-title">{event.title}</div>
                                    <div className="event-meta">
                                        <span> {event.location}</span>
                                        <span> {event.participants} joined</span>
                                    </div>
                                    <button className="btn btn-primary" style={{marginTop: '16px', padding: '12px'}}>
                                        Join Event
                                    </button>
                                </div>
                            </div>
                        ))}

                        <div className="section-header" style={{marginTop: '32px'}}>
                            <h3>Past Events</h3>
                        </div>

                        <div className="card">
                            <div style={{display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '12px'}}>
                                <div>
                                    <div style={{fontWeight: '600', color: 'var(--text-dark)', marginBottom: '4px'}}> Winter Walk Challenge</div>
                                    <div style={{fontSize: '13px', color: 'var(--text-gray)'}}>Completed  Feb 1, 2026</div>
                                </div>
                                <div style={{fontSize: '24px'}}></div>
                            </div>
                        </div>
                    </div>
                </>
            );
        }

        // Store Screen
        function StoreScreen() {
            const [selectedCategory, setSelectedCategory] = useState('all');
            const [searchQuery, setSearchQuery] = useState('');
            const [cartItems, setCartItems] = useState(0);

            const categories = [
                { id: 'all', name: 'All', icon: '' },
                { id: 'shoes', name: 'Shoes', icon: '' },
                { id: 'apparel', name: 'Apparel', icon: '' },
                { id: 'accessories', name: 'Accessories', icon: '' },
                { id: 'tech', name: 'Tech', icon: '' },
                { id: 'nutrition', name: 'Nutrition', icon: '' }
            ];

            const products = [
                {
                    id: 1,
                    name: 'Pro Walker 3000',
                    description: 'Professional walking shoes with advanced cushioning',
                    price: 129.99,
                    oldPrice: 179.99,
                    category: 'shoes',
                    icon: '',
                    rating: 4.8,
                    reviews: 342,
                    badge: '25% OFF',
                    color: 'linear-gradient(135deg, #667eea, #764ba2)'
                },
                {
                    id: 2,
                    name: 'Moisture-Wicking Tee',
                    description: 'Breathable performance shirt for long walks',
                    price: 34.99,
                    oldPrice: 49.99,
                    category: 'apparel',
                    icon: '',
                    rating: 4.6,
                    reviews: 218,
                    badge: 'SALE',
                    color: 'linear-gradient(135deg, #f093fb, #f5576c)'
                },
                {
                    id: 3,
                    name: 'Smart Fitness Watch',
                    description: 'Track steps, distance, and calories in real-time',
                    price: 199.99,
                    category: 'tech',
                    icon: '',
                    rating: 4.9,
                    reviews: 567,
                    badge: 'HOT',
                    color: 'linear-gradient(135deg, #a8edea, #fed6e3)'
                },
                {
                    id: 4,
                    name: 'Hydration Backpack',
                    description: '2L water reservoir with storage compartments',
                    price: 59.99,
                    category: 'accessories',
                    icon: '',
                    rating: 4.7,
                    reviews: 189,
                    color: 'linear-gradient(135deg, #ffeaa7, #fdcb6e)'
                },
                {
                    id: 5,
                    name: 'Compression Socks',
                    description: 'Improve circulation and reduce fatigue',
                    price: 24.99,
                    category: 'apparel',
                    icon: '',
                    rating: 4.5,
                    reviews: 423,
                    color: 'linear-gradient(135deg, #74b9ff, #0984e3)'
                },
                {
                    id: 6,
                    name: 'Energy Gel Pack (12)',
                    description: 'Quick energy boost for long distance walks',
                    price: 29.99,
                    category: 'nutrition',
                    icon: '',
                    rating: 4.4,
                    reviews: 156,
                    color: 'linear-gradient(135deg, #55efc4, #00b894)'
                },
                {
                    id: 7,
                    name: 'Reflective Safety Vest',
                    description: 'High-visibility gear for evening walks',
                    price: 19.99,
                    category: 'accessories',
                    icon: '',
                    rating: 4.6,
                    reviews: 234,
                    color: 'linear-gradient(135deg, #fd79a8, #e84393)'
                },
                {
                    id: 8,
                    name: 'Premium Insoles',
                    description: 'Extra comfort and arch support',
                    price: 39.99,
                    oldPrice: 54.99,
                    category: 'shoes',
                    icon: '',
                    rating: 4.7,
                    reviews: 298,
                    badge: 'NEW',
                    color: 'linear-gradient(135deg, #a29bfe, #6c5ce7)'
                }
            ];

            const filteredProducts = products.filter(product => {
                const matchesCategory = selectedCategory === 'all' || product.category === selectedCategory;
                const matchesSearch = product.name.toLowerCase().includes(searchQuery.toLowerCase()) ||
                                    product.description.toLowerCase().includes(searchQuery.toLowerCase());
                return matchesCategory && matchesSearch;
            });

            const addToCart = (product) => {
                setCartItems(cartItems + 1);
                // Add animation or notification here
            };

            return (
                <>
                    <div className="app-header">
                        <h1>Store </h1>
                        <div className="header-icons">
                            <button className="icon-btn" style={{position: 'relative'}}>
                                
                                {cartItems > 0 && (
                                    <div className="cart-badge">{cartItems}</div>
                                )}
                            </button>
                        </div>
                    </div>
                    <div className="app-content">
                        <div className="store-header fade-in">
                            <h2>Walking Gear & Equipment</h2>
                            <p>Premium products for walkers and fitness enthusiasts</p>
                        </div>

                        <div className="featured-banner slide-up">
                            <h3> Use Your Reward Points!</h3>
                            <p>Redeem points for discounts on all products</p>
                            <button className="btn">View Rewards</button>
                        </div>

                        <div className="search-bar slide-up" style={{animationDelay: '0.1s'}}>
                            <input 
                                type="text" 
                                className="search-input" 
                                placeholder="Search products..."
                                value={searchQuery}
                                onChange={(e) => setSearchQuery(e.target.value)}
                            />
                            <div className="search-icon"></div>
                        </div>

                        <div className="section-header">
                            <h3>Categories</h3>
                        </div>

                        <div className="category-chips">
                            {categories.map(category => (
                                <div
                                    key={category.id}
                                    className={`category-chip ${selectedCategory === category.id ? 'active' : ''}`}
                                    onClick={() => setSelectedCategory(category.id)}
                                >
                                    {category.icon} {category.name}
                                </div>
                            ))}
                        </div>

                        <div className="section-header">
                            <h3>Products</h3>
                            <span style={{fontSize: '14px', color: 'var(--text-gray)'}}>
                                {filteredProducts.length} items
                            </span>
                        </div>

                        <div className="product-grid">
                            {filteredProducts.map((product, index) => (
                                <div 
                                    key={product.id} 
                                    className="product-card slide-up"
                                    style={{animationDelay: `${index * 0.05}s`}}
                                >
                                    <div className="product-image" style={{background: product.color}}>
                                        <div style={{fontSize: '70px'}}>{product.icon}</div>
                                        {product.badge && (
                                            <div className="product-badge">{product.badge}</div>
                                        )}
                                    </div>
                                    <div className="product-info">
                                        <div className="product-name">{product.name}</div>
                                        <div className="product-description">{product.description}</div>
                                        <div className="product-rating">
                                            <div className="product-stars">
                                                {''.repeat(Math.floor(product.rating))}
                                            </div>
                                            <span className="product-rating-count">
                                                {product.rating} ({product.reviews})
                                            </span>
                                        </div>
                                        <div className="product-footer">
                                            <div>
                                                <span className="product-price">${product.price}</span>
                                                {product.oldPrice && (
                                                    <span className="product-old-price">${product.oldPrice}</span>
                                                )}
                                            </div>
                                            <button 
                                                className="add-to-cart-btn"
                                                onClick={() => addToCart(product)}
                                            >
                                                +
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            ))}
                        </div>

                        {filteredProducts.length === 0 && (
                            <div style={{textAlign: 'center', padding: '40px 20px', color: 'var(--text-gray)'}}>
                                <div style={{fontSize: '60px', marginBottom: '16px'}}></div>
                                <p>No products found matching your search</p>
                            </div>
                        )}
                    </div>
                </>
            );
        }

        // Rewards Screen
        function RewardsScreen({ appData, refreshAppData }) {
            const rewardPoints = appData?.rewards?.points || 0;
            const activities = appData?.activities || [];
            
            const achievements = [
                { icon: '', name: 'First Mile', unlocked: activities.length > 0 },
                { icon: '', name: '10K Steps', unlocked: activities.some(a => a.steps >= 10000) },
                { icon: '', name: 'Week Streak', unlocked: activities.length >= 7 },
                { icon: '', name: 'Early Bird', unlocked: true },
                { icon: '', name: 'Goal Crusher', unlocked: activities.length >= 5 },
                { icon: '', name: 'Social Walker', unlocked: true },
                { icon: '', name: 'Marathon', unlocked: activities.some(a => a.distance >= 42.195) },
                { icon: '', name: '100K Steps', unlocked: activities.reduce((sum, a) => sum + (a.steps || 0), 0) >= 100000 },
                { icon: '', name: 'Speed Demon', unlocked: false }
            ];

            const unlockedCount = achievements.filter(a => a.unlocked).length;

            const handleRedeem = () => {
                if (rewardPoints >= 100) {
                    if (confirm(`Redeem ${rewardPoints} points for $${(rewardPoints / 100).toFixed(2)} store credit?`)) {
                        const data = AppDataManager.getData();
                        data.rewards.points = 0;
                        AppDataManager.saveData(data);
                        refreshAppData();
                        alert('Points redeemed successfully!');
                    }
                } else {
                    alert('You need at least 100 points to redeem.');
                }
            };

            return (
                <>
                    <div className="app-header">
                        <h1>Rewards </h1>
                    </div>
                    <div className="app-content">
                        <div className="reward-card fade-in">
                            <div className="reward-label">Your Reward Points</div>
                            <div className="reward-points">{rewardPoints.toLocaleString()}</div>
                            <div className="reward-value">Worth ${(rewardPoints / 100).toFixed(2)} in store credit</div>
                            <button 
                                className="btn" 
                                style={{background: 'white', color: '#f5576c', fontWeight: '700'}}
                                onClick={handleRedeem}
                                disabled={rewardPoints < 100}
                            >
                                {rewardPoints >= 100 ? 'Redeem Points' : 'Not Enough Points'}
                            </button>
                        </div>

                        <div className="section-header">
                            <h3>How to Earn Points</h3>
                        </div>

                        <div className="card">
                            <div style={{display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '12px'}}>
                                <span style={{color: 'var(--text-dark)'}}> Daily steps (per 1,000)</span>
                                <span style={{color: 'var(--primary)', fontWeight: '700'}}>+10 pts</span>
                            </div>
                            <div style={{display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '12px'}}>
                                <span style={{color: 'var(--text-dark)'}}> Complete daily goal</span>
                                <span style={{color: 'var(--primary)', fontWeight: '700'}}>+50 pts</span>
                            </div>
                            <div style={{display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '12px'}}>
                                <span style={{color: 'var(--text-dark)'}}> Join an event</span>
                                <span style={{color: 'var(--primary)', fontWeight: '700'}}>+100 pts</span>
                            </div>
                            <div style={{display: 'flex', justifyContent: 'space-between', alignItems: 'center'}}>
                                <span style={{color: 'var(--text-dark)'}}> 7-day streak</span>
                                <span style={{color: 'var(--primary)', fontWeight: '700'}}>+200 pts</span>
                            </div>
                        </div>

                        <div className="section-header">
                            <h3>Achievements ({unlockedCount}/{achievements.length})</h3>
                        </div>

                        <div className="achievement-grid">
                            {achievements.map((achievement, idx) => (
                                <div 
                                    key={idx} 
                                    className={`achievement-item ${!achievement.unlocked ? 'locked' : ''} slide-up`}
                                    style={{animationDelay: `${idx * 0.05}s`}}
                                >
                                    <div className="achievement-icon">{achievement.icon}</div>
                                    <div className="achievement-name">{achievement.name}</div>
                                    {achievement.unlocked && <div style={{fontSize: '10px', color: 'var(--primary)', marginTop: '4px'}}> Unlocked</div>}
                                </div>
                            ))}
                        </div>

                        <div className="section-header">
                            <h3>Available Coupons</h3>
                        </div>

                        <div className="coupon-card slide-up">
                            <div className="coupon-title"> 20% Off Store Purchase</div>
                            <div className="coupon-desc">Valid on orders above $50</div>
                            <div className="coupon-expiry">Expires: Feb 28, 2026</div>
                        </div>

                        <div style={{marginTop: '24px', padding: '20px', background: 'var(--bg-light)', borderRadius: '16px', textAlign: 'center'}}>
                            <div style={{fontSize: '14px', color: 'var(--text-gray)', marginBottom: '8px'}}>
                                 Tip: Complete more activities to earn points!
                            </div>
                            <div style={{fontSize: '13px', color: 'var(--text-light)'}}>
                                Every activity you log earns you points automatically
                            </div>
                        </div>
                    </div>
                </>
            );
        }

        // Profile Screen
        function ProfileScreen({ appData, refreshAppData, onLogout }) {
            const user = appData?.user || {};
            const activities = appData?.activities || [];
            const programs = appData?.programs || [];
            const totalDistance = activities.reduce((sum, a) => sum + (a.distance || 0), 0);
            const [showUpgradeModal, setShowUpgradeModal] = useState(false);
            const [isPro, setIsPro] = useState(false); // Set to true if user has PRO
            const [showAccountSettings, setShowAccountSettings] = useState(false);
            const [showNotificationSettings, setShowNotificationSettings] = useState(false);
            const [showDeviceSettings, setShowDeviceSettings] = useState(false);
            const [showGoalsSettings, setShowGoalsSettings] = useState(false);
            const [showSubscriptionSettings, setShowSubscriptionSettings] = useState(false);
            const [accountData, setAccountData] = useState({
                fullName: user.name || '',
                email: user.email || '',
                phone: '+1 (555) 123-4567'
            });
            const [notificationSettings, setNotificationSettings] = useState({
                pushNotifications: true,
                emailNotifications: true,
                weeklyReport: true,
                goalReminders: true,
                achievements: true,
                specialOffers: false
            });
            const [connectedDevices, setConnectedDevices] = useState([
                { id: 1, name: 'Apple Watch Series 8', connected: true, lastSync: 'Now' },
                { id: 2, name: 'iPhone 14 Pro', connected: true, lastSync: '5 mins ago' },
                { id: 3, name: 'Fitbit Sense', connected: false, lastSync: '2 hours ago' }
            ]);
            const [goalsData, setGoalsData] = useState({
                dailyStepGoal: user.dailyGoal || 10000,
                activeMinutesGoal: 60,
                weeklyWalkDays: 5,
                calorieGoal: 500
            });

            const handleLogout = () => {
                if (confirm('Are you sure you want to logout?')) {
                    onLogout();
                }
            };

            const handleUpgrade = () => {
                setShowUpgradeModal(true);
            };

            const handleSubscribe = () => {
                // In production, this would integrate with payment gateway
                alert(' Redirecting to payment gateway...\n\nYou\'ll be charged 300/month for WalkFit PRO\n\n(This is a demo - no actual payment will be made)');
                setShowUpgradeModal(false);
                // Simulate successful subscription
                setTimeout(() => {
                    setIsPro(true);
                    alert(' Welcome to WalkFit PRO!\n\nAll premium features are now unlocked!');
                }, 1000);
            };

            return (
                <>
                    <div className="profile-header">
                        <div className="profile-avatar fade-in">{user.avatar || 'JD'}</div>
                        <div className="profile-name">{user.name || 'Rahul Kumar'}</div>
                        <div className="profile-email">{user.email || 'john.doe@email.com'}</div>
                        
                        {/* Subscription Badge */}
                        {isPro ? (
                            <div style={{
                                display: 'inline-block',
                                marginTop: '12px',
                                padding: '6px 16px',
                                background: 'linear-gradient(135deg, #fdcb6e, #f39c12)',
                                borderRadius: '20px',
                                fontSize: '12px',
                                fontWeight: '700',
                                color: 'white',
                                boxShadow: '0 4px 12px rgba(253, 203, 110, 0.4)'
                            }}>
                                 PRO MEMBER
                            </div>
                        ) : (
                            <button onClick={handleUpgrade} style={{
                                marginTop: '12px',
                                padding: '8px 20px',
                                background: 'linear-gradient(135deg, #667eea, #764ba2)',
                                border: 'none',
                                borderRadius: '20px',
                                fontSize: '12px',
                                fontWeight: '700',
                                color: 'white',
                                cursor: 'pointer',
                                boxShadow: '0 4px 12px rgba(102, 126, 234, 0.4)',
                                fontFamily: 'Outfit, sans-serif'
                            }}>
                                 Upgrade to PRO
                            </button>
                        )}

                        <div className="profile-stats">
                            <div className="profile-stat-item">
                                <div className="profile-stat-value">{activities.length}</div>
                                <div className="profile-stat-label">Activities</div>
                            </div>
                            <div className="profile-stat-item">
                                <div className="profile-stat-value">{programs.filter(p => p.completed).length}</div>
                                <div className="profile-stat-label">Completed</div>
                            </div>
                            <div className="profile-stat-item">
                                <div className="profile-stat-value">{totalDistance.toFixed(1)}</div>
                                <div className="profile-stat-label">Km</div>
                            </div>
                        </div>
                    </div>

                    <div className="app-content">
                        {/* Subscription Comparison Table */}
                        <div className="section-header">
                            <h3>Subscription Plans</h3>
                        </div>

                        <div style={{
                            background: 'white',
                            borderRadius: '16px',
                            overflow: 'hidden',
                            boxShadow: 'var(--shadow-md)',
                            marginBottom: '24px'
                        }} className="slide-up">
                            {/* Table Header */}
                            <div style={{
                                display: 'grid',
                                gridTemplateColumns: '2fr 1fr 1fr',
                                gap: '0',
                                borderBottom: '2px solid var(--bg-light)',
                                background: 'linear-gradient(135deg, #f8f9fa, #e9ecef)'
                            }}>
                                <div style={{padding: '16px', fontWeight: '700', fontSize: '13px', color: 'var(--text-dark)'}}>
                                    Features
                                </div>
                                <div style={{
                                    padding: '16px',
                                    fontWeight: '700',
                                    fontSize: '13px',
                                    textAlign: 'center',
                                    color: 'var(--text-dark)'
                                }}>
                                    Free
                                </div>
                                <div style={{
                                    padding: '16px',
                                    fontWeight: '700',
                                    fontSize: '13px',
                                    textAlign: 'center',
                                    background: 'linear-gradient(135deg, #fdcb6e15, #f39c1215)',
                                    color: '#f39c12',
                                    borderLeft: '2px solid #fdcb6e50'
                                }}>
                                    WalkFit PRO
                                </div>
                            </div>

                            {/* Table Rows */}
                            {[
                                { feature: 'Step & calorie tracking', free: '', pro: '' },
                                { feature: 'Daily goals & streaks', free: '', pro: '' },
                                { feature: 'Earn SSG Coins', free: '', pro: 'Earn 2 coins' },
                                { feature: 'Challenges', free: 'Limited', pro: 'Premium/exclusive' },
                                { feature: 'Ads', free: 'Yes', pro: ' No ads' },
                                { feature: 'Reward store deals', free: 'Basic', pro: 'Better prices & premium' },
                                { feature: 'Fitness leagues', free: 'Basic', pro: 'PRO leagues' },
                                { feature: 'Unlimited engagement rewards', free: 'Limited', pro: 'Expanded' }
                            ].map((row, idx) => (
                                <div key={idx} style={{
                                    display: 'grid',
                                    gridTemplateColumns: '2fr 1fr 1fr',
                                    gap: '0',
                                    borderBottom: idx < 7 ? '1px solid var(--bg-light)' : 'none'
                                }}>
                                    <div style={{
                                        padding: '14px 16px',
                                        fontSize: '13px',
                                        color: 'var(--text-dark)',
                                        fontWeight: '500'
                                    }}>
                                        {row.feature}
                                    </div>
                                    <div style={{
                                        padding: '14px 16px',
                                        fontSize: '13px',
                                        textAlign: 'center',
                                        color: row.free === '' ? '#00A896' : 'var(--text-gray)',
                                        fontWeight: row.free === '' ? '600' : '400'
                                    }}>
                                        {row.free}
                                    </div>
                                    <div style={{
                                        padding: '14px 16px',
                                        fontSize: '13px',
                                        textAlign: 'center',
                                        background: '#fdcb6e08',
                                        color: row.pro.includes('') || row.pro.includes('') ? '#00A896' : '#f39c12',
                                        fontWeight: '600',
                                        borderLeft: '2px solid #fdcb6e20'
                                    }}>
                                        {row.pro}
                                    </div>
                                </div>
                            ))}

                            {/* Upgrade CTA in table */}
                            {!isPro && (
                                <div style={{
                                    padding: '20px',
                                    background: 'linear-gradient(135deg, #fdcb6e15, #f39c1215)',
                                    textAlign: 'center'
                                }}>
                                    <button onClick={handleUpgrade} style={{
                                        padding: '14px 32px',
                                        background: 'linear-gradient(135deg, #fdcb6e, #f39c12)',
                                        border: 'none',
                                        borderRadius: '12px',
                                        fontSize: '15px',
                                        fontWeight: '700',
                                        color: 'white',
                                        cursor: 'pointer',
                                        boxShadow: '0 4px 16px rgba(253, 203, 110, 0.4)',
                                        fontFamily: 'Outfit, sans-serif',
                                        transition: 'all 0.3s ease'
                                    }}>
                                         Upgrade to PRO - 300/month
                                    </button>
                                </div>
                            )}
                        </div>

                        {/* Current Plan Card */}
                        <div style={{
                            background: isPro 
                                ? 'linear-gradient(135deg, #fdcb6e15, #f39c1210)' 
                                : 'linear-gradient(135deg, #02809015, #00A89610)',
                            padding: '20px',
                            borderRadius: '16px',
                            marginBottom: '24px',
                            border: isPro ? '2px solid #fdcb6e40' : '2px solid #02809040'
                        }}>
                            <div style={{fontSize: '14px', color: 'var(--text-gray)', marginBottom: '8px'}}>
                                Current Plan
                            </div>
                            <div style={{
                                fontSize: '24px',
                                fontWeight: '800',
                                color: isPro ? '#f39c12' : 'var(--primary)',
                                marginBottom: '8px'
                            }}>
                                {isPro ? ' WalkFit PRO' : ' Free Plan'}
                            </div>
                            {isPro ? (
                                <div style={{fontSize: '13px', color: 'var(--text-gray)'}}>
                                    Next billing: {new Date(Date.now() + 30*24*60*60*1000).toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' })}
                                </div>
                            ) : (
                                <div style={{fontSize: '13px', color: 'var(--text-gray)'}}>
                                    Upgrade anytime to unlock all premium features
                                </div>
                            )}
                        </div>

                        {/* Upgrade Modal */}
                        {showUpgradeModal && (
                            <div style={{
                                position: 'fixed',
                                top: 0,
                                left: 0,
                                right: 0,
                                bottom: 0,
                                background: 'rgba(0,0,0,0.6)',
                                display: 'flex',
                                alignItems: 'center',
                                justifyContent: 'center',
                                zIndex: 2000,
                                padding: '20px',
                                backdropFilter: 'blur(4px)'
                            }} onClick={() => setShowUpgradeModal(false)}>
                                <div style={{
                                    background: 'white',
                                    borderRadius: '24px',
                                    padding: '32px 24px',
                                    maxWidth: '400px',
                                    width: '100%',
                                    boxShadow: '0 20px 60px rgba(0,0,0,0.4)',
                                    animation: 'slideUp 0.3s ease'
                                }} onClick={(e) => e.stopPropagation()}>
                                    {/* Modal Header */}
                                    <div style={{textAlign: 'center', marginBottom: '24px'}}>
                                        <div style={{fontSize: '48px', marginBottom: '12px'}}></div>
                                        <h2 style={{fontSize: '24px', fontWeight: '800', marginBottom: '8px', color: 'var(--text-dark)'}}>
                                            Upgrade to PRO
                                        </h2>
                                        <p style={{fontSize: '14px', color: 'var(--text-gray)'}}>
                                            Unlock all premium features
                                        </p>
                                    </div>

                                    {/* Pricing */}
                                    <div style={{
                                        background: 'linear-gradient(135deg, #fdcb6e15, #f39c1210)',
                                        padding: '20px',
                                        borderRadius: '16px',
                                        marginBottom: '24px',
                                        textAlign: 'center',
                                        border: '2px solid #fdcb6e40'
                                    }}>
                                        <div style={{fontSize: '16px', color: 'var(--text-gray)', marginBottom: '8px'}}>
                                            Monthly Plan
                                        </div>
                                        <div style={{fontSize: '42px', fontWeight: '800', color: '#f39c12', lineHeight: '1'}}>
                                            300
                                        </div>
                                        <div style={{fontSize: '14px', color: 'var(--text-gray)', marginTop: '4px'}}>
                                            per month
                                        </div>
                                    </div>

                                    {/* Benefits */}
                                    <div style={{marginBottom: '24px'}}>
                                        <div style={{fontSize: '14px', fontWeight: '700', marginBottom: '12px', color: 'var(--text-dark)'}}>
                                            What you'll get:
                                        </div>
                                        {[
                                            'Earn 2 SSG Coins on all activities',
                                            'Access to premium & exclusive challenges',
                                            'Ad-free experience',
                                            'Better prices & premium deals in store',
                                            'Access to PRO fitness leagues',
                                            'Expanded engagement rewards',
                                            'Priority customer support'
                                        ].map((benefit, idx) => (
                                            <div key={idx} style={{
                                                display: 'flex',
                                                alignItems: 'flex-start',
                                                gap: '10px',
                                                marginBottom: '10px'
                                            }}>
                                                <div style={{color: '#00A896', fontSize: '16px', marginTop: '2px'}}></div>
                                                <div style={{fontSize: '13px', color: 'var(--text-dark)', flex: 1}}>
                                                    {benefit}
                                                </div>
                                            </div>
                                        ))}
                                    </div>

                                    {/* Action Buttons */}
                                    <div style={{display: 'flex', gap: '12px'}}>
                                        <button onClick={() => setShowUpgradeModal(false)} style={{
                                            flex: 1,
                                            padding: '14px',
                                            background: '#f0f0f0',
                                            border: 'none',
                                            borderRadius: '12px',
                                            fontSize: '14px',
                                            fontWeight: '600',
                                            cursor: 'pointer',
                                            fontFamily: 'Outfit, sans-serif',
                                            color: 'var(--text-dark)'
                                        }}>
                                            Maybe Later
                                        </button>
                                        <button onClick={handleSubscribe} style={{
                                            flex: 1,
                                            padding: '14px',
                                            background: 'linear-gradient(135deg, #fdcb6e, #f39c12)',
                                            border: 'none',
                                            borderRadius: '12px',
                                            fontSize: '14px',
                                            fontWeight: '700',
                                            color: 'white',
                                            cursor: 'pointer',
                                            boxShadow: '0 4px 16px rgba(253, 203, 110, 0.4)',
                                            fontFamily: 'Outfit, sans-serif'
                                        }}>
                                            Subscribe Now
                                        </button>
                                    </div>

                                    {/* Terms */}
                                    <div style={{
                                        fontSize: '11px',
                                        color: 'var(--text-light)',
                                        textAlign: 'center',
                                        marginTop: '16px',
                                        lineHeight: '1.4'
                                    }}>
                                        Cancel anytime. No commitments. Auto-renewal can be disabled.
                                    </div>
                                </div>
                            </div>
                        )}

                        <div className="section-header">
                            <h3>Recent Badges</h3>
                        </div>

                        <div style={{display: 'flex', gap: '12px', marginBottom: '24px'}}>
                            <div style={{flex: 1, background: 'white', padding: '16px', borderRadius: 'var(--radius-md)', textAlign: 'center', boxShadow: 'var(--shadow-sm)'}}>
                                <div style={{fontSize: '42px', marginBottom: '8px'}}></div>
                                <div style={{fontSize: '13px', fontWeight: '600', color: 'var(--text-dark)'}}>Active User</div>
                            </div>
                            <div style={{flex: 1, background: 'white', padding: '16px', borderRadius: 'var(--radius-md)', textAlign: 'center', boxShadow: 'var(--shadow-sm)'}}>
                                <div style={{fontSize: '42px', marginBottom: '8px'}}></div>
                                <div style={{fontSize: '13px', fontWeight: '600', color: 'var(--text-dark)'}}>First Steps</div>
                            </div>
                        </div>

                        <div className="section-header">
                            <h3>Settings</h3>
                        </div>

                        <div className="settings-list">
                            {isPro && (
                                <div className="settings-item" onClick={() => setShowSubscriptionSettings(true)}>
                                    <div className="settings-label">
                                        <span></span>
                                        <span style={{color: '#f39c12'}}>Manage PRO Subscription</span>
                                    </div>
                                    <div className="settings-arrow"></div>
                                </div>
                            )}
                            <div className="settings-item" onClick={() => setShowAccountSettings(true)}>
                                <div className="settings-label">
                                    <span></span>
                                    <span>Account Settings</span>
                                </div>
                                <div className="settings-arrow"></div>
                            </div>
                            <div className="settings-item" onClick={() => setShowNotificationSettings(true)}>
                                <div className="settings-label">
                                    <span></span>
                                    <span>Notifications</span>
                                </div>
                                <div className="settings-arrow"></div>
                            </div>
                            <div className="settings-item" onClick={() => setShowDeviceSettings(true)}>
                                <div className="settings-label">
                                    <span></span>
                                    <span>Connected Devices</span>
                                </div>
                                <div className="settings-arrow"></div>
                            </div>
                            <div className="settings-item" onClick={() => setShowGoalsSettings(true)}>
                                <div className="settings-label">
                                    <span></span>
                                    <span>Goals & Preferences</span>
                                </div>
                                <div className="settings-arrow"></div>
                            </div>
                            <div className="settings-item" onClick={handleLogout} style={{borderTop: '2px solid var(--bg-light)', marginTop: '16px', paddingTop: '16px'}}>
                                <div className="settings-label">
                                    <span></span>
                                    <span style={{color: 'var(--accent)'}}>Logout</span>
                                </div>
                                <div className="settings-arrow"></div>
                            </div>
                        </div>

                        <div style={{marginTop: '32px', padding: '20px', background: 'var(--bg-light)', borderRadius: '16px', textAlign: 'center'}}>
                            <div style={{fontSize: '14px', color: 'var(--text-gray)', marginBottom: '8px'}}>
                                Member since
                            </div>
                            <div style={{fontSize: '16px', fontWeight: '600', color: 'var(--text-dark)'}}>
                                {new Date(user.joinDate || Date.now()).toLocaleDateString('en-US', { month: 'long', year: 'numeric' })}
                            </div>
                        </div>
                    </div>

                    {/* Account Settings Modal */}
                    {showAccountSettings && (
                        <div className="modal-overlay" onClick={() => setShowAccountSettings(false)}>
                            <div className="modal-content" onClick={(e) => e.stopPropagation()}>
                                <div className="modal-header">
                                    <div className="modal-title">Account Settings </div>
                                    <button className="modal-close" onClick={() => setShowAccountSettings(false)}></button>
                                </div>
                                <div style={{padding: '20px'}}>
                                    <div style={{marginBottom: '20px'}}>
                                        <label className="form-label">Full Name</label>
                                        <input
                                            type="text"
                                            className="form-input"
                                            value={accountData.fullName}
                                            onChange={(e) => setAccountData({...accountData, fullName: e.target.value})}
                                            placeholder="Your full name"
                                        />
                                    </div>
                                    <div style={{marginBottom: '20px'}}>
                                        <label className="form-label">Email Address</label>
                                        <input
                                            type="email"
                                            className="form-input"
                                            value={accountData.email}
                                            onChange={(e) => setAccountData({...accountData, email: e.target.value})}
                                            placeholder="your@email.com"
                                        />
                                    </div>
                                    <div style={{marginBottom: '20px'}}>
                                        <label className="form-label">Phone Number</label>
                                        <input
                                            type="tel"
                                            className="form-input"
                                            value={accountData.phone}
                                            onChange={(e) => setAccountData({...accountData, phone: e.target.value})}
                                            placeholder="+1 (555) 123-4567"
                                        />
                                    </div>
                                    <div className="button-group">
                                        <button className="btn btn-secondary" style={{flex: 1}} onClick={() => setShowAccountSettings(false)}>
                                            Cancel
                                        </button>
                                        <button className="btn" style={{flex: 1}} onClick={() => {
                                            alert(' Account settings updated successfully!');
                                            setShowAccountSettings(false);
                                        }}>
                                            Save Changes
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Notifications Settings Modal */}
                    {showNotificationSettings && (
                        <div className="modal-overlay" onClick={() => setShowNotificationSettings(false)}>
                            <div className="modal-content" onClick={(e) => e.stopPropagation()}>
                                <div className="modal-header">
                                    <div className="modal-title">Notification Settings </div>
                                    <button className="modal-close" onClick={() => setShowNotificationSettings(false)}></button>
                                </div>
                                <div style={{padding: '20px'}}>
                                    {Object.entries(notificationSettings).map(([key, value]) => (
                                        <div key={key} style={{
                                            display: 'flex',
                                            alignItems: 'center',
                                            justifyContent: 'space-between',
                                            padding: '16px 0',
                                            borderBottom: '1px solid var(--border)'
                                        }}>
                                            <div>
                                                <div style={{fontWeight: '600', color: 'var(--text-dark)', marginBottom: '4px'}}>
                                                    {key.replace(/([A-Z])/g, ' $1').trim()}
                                                </div>
                                            </div>
                                            <label style={{position: 'relative', cursor: 'pointer'}}>
                                                <input
                                                    type="checkbox"
                                                    checked={value}
                                                    onChange={(e) => setNotificationSettings({...notificationSettings, [key]: e.target.checked})}
                                                    style={{width: '20px', height: '20px', cursor: 'pointer'}}
                                                />
                                            </label>
                                        </div>
                                    ))}
                                    <div className="button-group" style={{marginTop: '20px'}}>
                                        <button className="btn" style={{width: '100%'}} onClick={() => {
                                            alert(' Notification preferences saved!');
                                            setShowNotificationSettings(false);
                                        }}>
                                            Save Preferences
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Connected Devices Modal */}
                    {showDeviceSettings && (
                        <div className="modal-overlay" onClick={() => setShowDeviceSettings(false)}>
                            <div className="modal-content" onClick={(e) => e.stopPropagation()}>
                                <div className="modal-header">
                                    <div className="modal-title">Connected Devices </div>
                                    <button className="modal-close" onClick={() => setShowDeviceSettings(false)}></button>
                                </div>
                                <div style={{padding: '20px'}}>
                                    {connectedDevices.map((device) => (
                                        <div key={device.id} style={{
                                            padding: '16px',
                                            background: 'var(--bg-light)',
                                            borderRadius: '12px',
                                            marginBottom: '12px',
                                            display: 'flex',
                                            alignItems: 'center',
                                            justifyContent: 'space-between'
                                        }}>
                                            <div>
                                                <div style={{fontWeight: '600', color: 'var(--text-dark)', marginBottom: '4px'}}>
                                                    {device.name}
                                                </div>
                                                <div style={{fontSize: '13px', color: 'var(--text-gray)'}}>
                                                    {device.connected ? ' Connected' : ' Not Connected'}  Last sync: {device.lastSync}
                                                </div>
                                            </div>
                                            {device.connected && (
                                                <button style={{
                                                    padding: '8px 16px',
                                                    background: 'var(--accent)',
                                                    color: 'white',
                                                    border: 'none',
                                                    borderRadius: '8px',
                                                    fontSize: '12px',
                                                    fontWeight: '600',
                                                    cursor: 'pointer',
                                                    fontFamily: 'Outfit, sans-serif'
                                                }} onClick={() => {
                                                    const updated = connectedDevices.map(d => 
                                                        d.id === device.id ? {...d, connected: false} : d
                                                    );
                                                    setConnectedDevices(updated);
                                                }}>
                                                    Disconnect
                                                </button>
                                            )}
                                        </div>
                                    ))}
                                    <div className="button-group" style={{marginTop: '20px'}}>
                                        <button className="btn" style={{width: '100%'}} onClick={() => {
                                            alert(' Device changes saved!');
                                            setShowDeviceSettings(false);
                                        }}>
                                            Done
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Goals & Preferences Modal */}
                    {showGoalsSettings && (
                        <div className="modal-overlay" onClick={() => setShowGoalsSettings(false)}>
                            <div className="modal-content" onClick={(e) => e.stopPropagation()}>
                                <div className="modal-header">
                                    <div className="modal-title">Goals & Preferences </div>
                                    <button className="modal-close" onClick={() => setShowGoalsSettings(false)}></button>
                                </div>
                                <div style={{padding: '20px'}}>
                                    <div style={{marginBottom: '20px'}}>
                                        <label className="form-label">Daily Step Goal</label>
                                        <input
                                            type="number"
                                            className="form-input"
                                            value={goalsData.dailyStepGoal}
                                            onChange={(e) => setGoalsData({...goalsData, dailyStepGoal: parseInt(e.target.value)})}
                                            placeholder="10000"
                                        />
                                    </div>
                                    <div style={{marginBottom: '20px'}}>
                                        <label className="form-label">Active Minutes Goal</label>
                                        <input
                                            type="number"
                                            className="form-input"
                                            value={goalsData.activeMinutesGoal}
                                            onChange={(e) => setGoalsData({...goalsData, activeMinutesGoal: parseInt(e.target.value)})}
                                            placeholder="60"
                                        />
                                    </div>
                                    <div style={{marginBottom: '20px'}}>
                                        <label className="form-label">Walk Days Per Week</label>
                                        <input
                                            type="number"
                                            className="form-input"
                                            value={goalsData.weeklyWalkDays}
                                            onChange={(e) => setGoalsData({...goalsData, weeklyWalkDays: parseInt(e.target.value)})}
                                            min="1"
                                            max="7"
                                            placeholder="5"
                                        />
                                    </div>
                                    <div style={{marginBottom: '20px'}}>
                                        <label className="form-label">Daily Calorie Goal</label>
                                        <input
                                            type="number"
                                            className="form-input"
                                            value={goalsData.calorieGoal}
                                            onChange={(e) => setGoalsData({...goalsData, calorieGoal: parseInt(e.target.value)})}
                                            placeholder="500"
                                        />
                                    </div>
                                    <div className="button-group">
                                        <button className="btn btn-secondary" style={{flex: 1}} onClick={() => setShowGoalsSettings(false)}>
                                            Cancel
                                        </button>
                                        <button className="btn" style={{flex: 1}} onClick={() => {
                                            alert(' Goals updated successfully!');
                                            setShowGoalsSettings(false);
                                        }}>
                                            Save Goals
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Subscription Settings Modal */}
                    {showSubscriptionSettings && (
                        <div className="modal-overlay" onClick={() => setShowSubscriptionSettings(false)}>
                            <div className="modal-content" onClick={(e) => e.stopPropagation()}>
                                <div className="modal-header">
                                    <div className="modal-title">Manage Subscription </div>
                                    <button className="modal-close" onClick={() => setShowSubscriptionSettings(false)}></button>
                                </div>
                                <div style={{padding: '20px', textAlign: 'center'}}>
                                    <div style={{fontSize: '48px', marginBottom: '16px'}}></div>
                                    <h3 style={{marginBottom: '16px'}}>WalkFit PRO Active</h3>
                                    <div style={{background: 'var(--bg-light)', padding: '16px', borderRadius: '12px', marginBottom: '20px'}}>
                                        <div style={{fontSize: '13px', color: 'var(--text-gray)', marginBottom: '8px'}}>Monthly Payment</div>
                                        <div style={{fontSize: '24px', fontWeight: '700', color: 'var(--primary)'}}>300/month</div>
                                    </div>
                                    <div style={{fontSize: '14px', color: 'var(--text-gray)', marginBottom: '20px'}}>
                                        Your next billing date is <strong>March 15, 2026</strong>
                                    </div>
                                    <div className="button-group">
                                        <button className="btn btn-secondary" style={{flex: 1}} onClick={() => setShowSubscriptionSettings(false)}>
                                            Close
                                        </button>
                                        <button className="btn" style={{flex: 1, background: 'var(--accent)'}} onClick={() => {
                                            alert('Subscription cancelled. You will have access until the end of your billing period.');
                                            setIsPro(false);
                                            setShowSubscriptionSettings(false);
                                        }}>
                                            Cancel Subscription
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}
                </>
            );
        }

        // Bottom Navigation
        // Payment Scanner Screen
        function ScannerScreen() {
            const [isScanning, setIsScanning] = useState(false);
            const [scanResult, setScanResult] = useState(null);
            const [paymentAmount, setPaymentAmount] = useState('');

            const handleStartScan = () => {
                setIsScanning(true);
                setScanResult(null);
                
                // Simulate QR code scan after 2 seconds
                setTimeout(() => {
                    const mockScanData = {
                        merchant: 'WalkFit Store',
                        upiId: 'walkfit@upi',
                        amount: paymentAmount || '0',
                        transactionId: 'TXN' + Date.now()
                    };
                    setScanResult(mockScanData);
                    setIsScanning(false);
                }, 2000);
            };

            const handlePayment = () => {
                if (!paymentAmount) {
                    alert(' Please enter an amount');
                    return;
                }
                alert(` Payment Successful!\n\nAmount: ${paymentAmount}\nMerchant: WalkFit Store\nTransaction ID: TXN${Date.now()}\n\nThank you for your purchase!`);
                setScanResult(null);
                setPaymentAmount('');
            };

            return (
                <>
                    <div className="app-header">
                        <h1>Payment Scanner </h1>
                    </div>
                    <div className="app-content">
                        {/* Payment Amount Input */}
                        <div className="stats-card fade-in" style={{marginBottom: '20px'}}>
                            <div style={{marginBottom: '12px'}}>
                                <label className="form-label">Enter Amount ()</label>
                                <input
                                    type="number"
                                    className="form-input"
                                    placeholder="Enter amount to pay"
                                    value={paymentAmount}
                                    onChange={(e) => setPaymentAmount(e.target.value)}
                                    style={{fontSize: '18px', textAlign: 'center'}}
                                />
                            </div>
                            {paymentAmount && (
                                <div style={{
                                    textAlign: 'center',
                                    fontSize: '32px',
                                    fontWeight: '800',
                                    color: 'var(--primary)',
                                    marginTop: '12px'
                                }}>
                                    {paymentAmount}
                                </div>
                            )}
                        </div>

                        {/* Scanner Area */}
                        <div style={{
                            background: isScanning 
                                ? 'linear-gradient(135deg, #667eea15, #764ba215)' 
                                : 'white',
                            borderRadius: '20px',
                            padding: '40px 20px',
                            marginBottom: '20px',
                            textAlign: 'center',
                            border: isScanning ? '3px dashed #667eea' : '2px solid var(--border)',
                            minHeight: '300px',
                            display: 'flex',
                            flexDirection: 'column',
                            alignItems: 'center',
                            justifyContent: 'center',
                            position: 'relative',
                            overflow: 'hidden'
                        }} className="slide-up">
                            {!isScanning && !scanResult && (
                                <>
                                    <div style={{fontSize: '80px', marginBottom: '20px'}}></div>
                                    <h3 style={{fontSize: '20px', fontWeight: '700', marginBottom: '12px', color: 'var(--text-dark)'}}>
                                        Scan QR Code
                                    </h3>
                                    <p style={{fontSize: '14px', color: 'var(--text-gray)', marginBottom: '24px'}}>
                                        Point your camera at a QR code to scan
                                    </p>
                                    <button
                                        onClick={handleStartScan}
                                        style={{
                                            padding: '16px 40px',
                                            background: 'linear-gradient(135deg, #667eea, #764ba2)',
                                            color: 'white',
                                            border: 'none',
                                            borderRadius: '12px',
                                            fontSize: '16px',
                                            fontWeight: '700',
                                            cursor: 'pointer',
                                            boxShadow: '0 4px 16px rgba(102, 126, 234, 0.4)',
                                            fontFamily: 'Outfit, sans-serif'
                                        }}
                                    >
                                         Start Scanning
                                    </button>
                                </>
                            )}

                            {isScanning && (
                                <div style={{position: 'relative', width: '100%'}}>
                                    {/* Scanning Animation */}
                                    <div style={{
                                        width: '200px',
                                        height: '200px',
                                        margin: '0 auto',
                                        border: '4px solid #667eea',
                                        borderRadius: '16px',
                                        position: 'relative',
                                        marginBottom: '20px'
                                    }}>
                                        {/* Corner Brackets */}
                                        <div style={{
                                            position: 'absolute',
                                            top: '-4px',
                                            left: '-4px',
                                            width: '40px',
                                            height: '40px',
                                            borderTop: '4px solid #667eea',
                                            borderLeft: '4px solid #667eea'
                                        }}></div>
                                        <div style={{
                                            position: 'absolute',
                                            top: '-4px',
                                            right: '-4px',
                                            width: '40px',
                                            height: '40px',
                                            borderTop: '4px solid #667eea',
                                            borderRight: '4px solid #667eea'
                                        }}></div>
                                        <div style={{
                                            position: 'absolute',
                                            bottom: '-4px',
                                            left: '-4px',
                                            width: '40px',
                                            height: '40px',
                                            borderBottom: '4px solid #667eea',
                                            borderLeft: '4px solid #667eea'
                                        }}></div>
                                        <div style={{
                                            position: 'absolute',
                                            bottom: '-4px',
                                            right: '-4px',
                                            width: '40px',
                                            height: '40px',
                                            borderBottom: '4px solid #667eea',
                                            borderRight: '4px solid #667eea'
                                        }}></div>

                                        {/* Scanning Line */}
                                        <div style={{
                                            position: 'absolute',
                                            width: '100%',
                                            height: '3px',
                                            background: '#667eea',
                                            top: '50%',
                                            animation: 'scan 2s ease-in-out infinite',
                                            boxShadow: '0 0 10px #667eea'
                                        }}></div>
                                    </div>
                                    
                                    <div style={{fontSize: '18px', fontWeight: '600', color: '#667eea', marginBottom: '8px'}}>
                                        Scanning...
                                    </div>
                                    <div style={{fontSize: '14px', color: 'var(--text-gray)'}}>
                                        Hold steady
                                    </div>
                                </div>
                            )}

                            {scanResult && (
                                <div style={{width: '100%'}}>
                                    <div style={{fontSize: '60px', marginBottom: '20px'}}></div>
                                    <h3 style={{fontSize: '20px', fontWeight: '700', marginBottom: '20px', color: '#00A896'}}>
                                        QR Code Scanned!
                                    </h3>
                                    
                                    <div style={{
                                        background: 'var(--bg-light)',
                                        borderRadius: '12px',
                                        padding: '16px',
                                        marginBottom: '20px',
                                        textAlign: 'left'
                                    }}>
                                        <div style={{marginBottom: '12px'}}>
                                            <div style={{fontSize: '12px', color: 'var(--text-gray)', marginBottom: '4px'}}>
                                                Merchant
                                            </div>
                                            <div style={{fontSize: '16px', fontWeight: '600', color: 'var(--text-dark)'}}>
                                                {scanResult.merchant}
                                            </div>
                                        </div>
                                        <div style={{marginBottom: '12px'}}>
                                            <div style={{fontSize: '12px', color: 'var(--text-gray)', marginBottom: '4px'}}>
                                                UPI ID
                                            </div>
                                            <div style={{fontSize: '14px', color: 'var(--text-dark)', fontFamily: 'Space Mono, monospace'}}>
                                                {scanResult.upiId}
                                            </div>
                                        </div>
                                        <div>
                                            <div style={{fontSize: '12px', color: 'var(--text-gray)', marginBottom: '4px'}}>
                                                Amount
                                            </div>
                                            <div style={{fontSize: '24px', fontWeight: '800', color: 'var(--primary)'}}>
                                                {paymentAmount || '0'}
                                            </div>
                                        </div>
                                    </div>

                                    <div style={{display: 'flex', gap: '12px'}}>
                                        <button
                                            onClick={() => {
                                                setScanResult(null);
                                                setIsScanning(false);
                                            }}
                                            style={{
                                                flex: 1,
                                                padding: '14px',
                                                background: '#f0f0f0',
                                                border: 'none',
                                                borderRadius: '12px',
                                                fontSize: '14px',
                                                fontWeight: '600',
                                                cursor: 'pointer',
                                                fontFamily: 'Outfit, sans-serif'
                                            }}
                                        >
                                            Cancel
                                        </button>
                                        <button
                                            onClick={handlePayment}
                                            style={{
                                                flex: 1,
                                                padding: '14px',
                                                background: 'linear-gradient(135deg, #00A896, #028090)',
                                                color: 'white',
                                                border: 'none',
                                                borderRadius: '12px',
                                                fontSize: '14px',
                                                fontWeight: '700',
                                                cursor: 'pointer',
                                                boxShadow: '0 4px 16px rgba(2, 128, 144, 0.4)',
                                                fontFamily: 'Outfit, sans-serif'
                                            }}
                                        >
                                            Pay Now
                                        </button>
                                    </div>
                                </div>
                            )}
                        </div>

                        {/* Payment Methods */}
                        <div className="section-header">
                            <h3>Quick Payment Options</h3>
                        </div>

                        <div style={{display: 'grid', gridTemplateColumns: 'repeat(2, 1fr)', gap: '12px', marginBottom: '20px'}}>
                            {[
                                { name: 'Google Pay', icon: '', color: '#4285F4' },
                                { name: 'PhonePe', icon: '', color: '#5f259f' },
                                { name: 'Paytm', icon: '', color: '#00BAF2' },
                                { name: 'UPI', icon: '', color: '#097939' }
                            ].map((method, idx) => (
                                <div
                                    key={idx}
                                    onClick={() => {
                                        if (paymentAmount) {
                                            alert(` Opening ${method.name}...\n\nProcessing payment of ${paymentAmount}\n\nTransaction initiated!`);
                                            handlePayment();
                                        } else {
                                            alert(' Please enter an amount first');
                                        }
                                    }}
                                    style={{
                                        background: 'white',
                                        padding: '16px',
                                        borderRadius: '12px',
                                        textAlign: 'center',
                                        cursor: 'pointer',
                                        boxShadow: 'var(--shadow-sm)',
                                        transition: 'all 0.3s ease'
                                    }}
                                    className="slide-up"
                                >
                                    <div style={{fontSize: '32px', marginBottom: '8px'}}>{method.icon}</div>
                                    <div style={{fontSize: '13px', fontWeight: '600', color: method.color}}>
                                        {method.name}
                                    </div>
                                </div>
                            ))}
                        </div>

                        {/* Recent Transactions */}
                        <div className="section-header">
                            <h3>Recent Transactions</h3>
                        </div>

                        <div style={{background: 'white', borderRadius: '12px', overflow: 'hidden', boxShadow: 'var(--shadow-sm)'}}>
                            {[
                                { merchant: 'WalkFit Store', amount: '599', date: 'Today', status: 'Success', icon: '' },
                                { merchant: 'Nike Shoes', amount: '3,999', date: 'Yesterday', status: 'Success', icon: '' },
                                { merchant: 'Premium T-Shirt', amount: '699', date: '2 days ago', status: 'Success', icon: '' }
                            ].map((txn, idx) => (
                                <div
                                    key={idx}
                                    style={{
                                        padding: '16px',
                                        borderBottom: idx < 2 ? '1px solid var(--border)' : 'none',
                                        display: 'flex',
                                        alignItems: 'center',
                                        gap: '12px'
                                    }}
                                >
                                    <div style={{
                                        width: '40px',
                                        height: '40px',
                                        borderRadius: '10px',
                                        background: 'var(--bg-light)',
                                        display: 'flex',
                                        alignItems: 'center',
                                        justifyContent: 'center',
                                        fontSize: '20px'
                                    }}>
                                        {txn.icon}
                                    </div>
                                    <div style={{flex: 1}}>
                                        <div style={{fontSize: '14px', fontWeight: '600', color: 'var(--text-dark)', marginBottom: '2px'}}>
                                            {txn.merchant}
                                        </div>
                                        <div style={{fontSize: '12px', color: 'var(--text-gray)'}}>
                                            {txn.date}
                                        </div>
                                    </div>
                                    <div style={{textAlign: 'right'}}>
                                        <div style={{fontSize: '16px', fontWeight: '700', color: 'var(--text-dark)', marginBottom: '2px'}}>
                                            {txn.amount}
                                        </div>
                                        <div style={{fontSize: '11px', color: '#00A896', fontWeight: '600'}}>
                                            {txn.status}
                                        </div>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>

                    {/* Add scanning animation keyframes */}
                    <style>{`
                        @keyframes scan {
                            0% { top: 0%; }
                            50% { top: 100%; }
                            100% { top: 0%; }
                        }
                    `}</style>
                </>
            );
        }

        function BottomNav({ activeTab, setActiveTab }) {
            const navItems = [
                { id: 'home', icon: '', label: 'Home' },
                { id: 'stats', icon: '', label: 'Activity' },
                { id: 'rewards', icon: '', label: 'Rewards' },
                { id: 'store', icon: '', label: 'Store' },
                { id: 'profile', icon: '', label: 'Profile' }
            ];

            return (
                <>
                    <div className="bottom-nav">
                        {navItems.map(item => (
                            <div 
                                key={item.id}
                                className={`nav-item ${activeTab === item.id ? 'active' : ''}`}
                                onClick={() => setActiveTab(item.id)}
                            >
                                <div className="nav-icon">{item.icon}</div>
                                <div className="nav-label">{item.label}</div>
                            </div>
                        ))}
                    </div>
                </>
            );
        }

        // Render App
        const root = document.getElementById('root');
        ReactDOM.render(<WalkFitApp />, root);
        
        // Hide loading screen after render
        setTimeout(() => {
            const loadingScreen = document.getElementById('loading-screen');
            if (loadingScreen) {
                loadingScreen.classList.add('hidden');
            }
        }, 100);
    </script>
</body>
</html>